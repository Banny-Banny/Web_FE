# 타임캡슐 대기실 개인 컨텐츠 작성 및 저장 명세서

**Feature Branch**: `feat/waiting-room-content-write`  
**Created**: 2026-01-28  
**Status**: Draft  
**Input**: User description: "타임캡슐 대기실에서 개인 컨텐츠를 작성하고 저장하는 기능을 구현합니다."

## 📋 개요

### 프로젝트 목표
대기실에 참여한 각 사용자가 자신의 슬롯에 타임캡슐 컨텐츠(텍스트, 이미지, 음악, 영상)를 작성하고 저장할 수 있도록 합니다. 사용자는 대기실 설정에 따라 허용된 범위 내에서 자유롭게 컨텐츠를 작성하고, 작성한 내용을 저장하여 나중에 수정할 수 있습니다.

### 비즈니스 가치
- **개인화된 경험 제공**: 각 참여자가 자신만의 고유한 컨텐츠를 작성하여 타임캡슐에 담을 수 있어 개인화된 경험 제공
- **사용자 만족도 향상**: 텍스트, 이미지, 음악, 영상 등 다양한 형태의 컨텐츠를 작성할 수 있어 사용자의 표현 욕구 충족
- **작업 연속성 보장**: 작성한 컨텐츠가 자동으로 저장되어 사용자가 언제든지 이어서 작성하거나 수정할 수 있음
- **사용자 이탈 방지**: 대기실 설정에 따른 제약사항을 명확히 표시하여 사용자가 허용 범위를 이해하고 적절한 컨텐츠를 작성할 수 있도록 지원

### 범위
- **포함**: 
  - 대기실 설정 조회 (미디어 제한 확인)
  - 개인 컨텐츠 작성 (텍스트, 이미지, 음악, 영상)
  - 개인 컨텐츠 저장 (신규 작성 및 수정)
  - 기존 작성 컨텐츠 조회 및 불러오기
  - 대기실 설정에 따른 미디어 업로드 제한 처리
  - 자동 저장 기능 (작성 중 자동 저장)
- **제외**: 
  - 타임캡슐 최종 생성 (대기실 이후 단계)
  - 다른 참여자의 컨텐츠 조회 (별도 기능)
  - 컨텐츠 삭제 (별도 기능)
  - 컨텐츠 공유 (별도 기능)
  - 컨텐츠 미리보기 (별도 기능)

---

## 🎯 사용자 시나리오

### US1: 사용자가 대기실에서 개인 컨텐츠를 작성하고 저장 (Priority: P1)

**시나리오**: 대기실에 참여한 사용자가 자신의 슬롯에 타임캡슐 컨텐츠를 작성하고 저장할 때

**사용자 행동**:
1. 사용자가 대기실 페이지에 진입
2. 사용자가 자신의 슬롯에 컨텐츠를 작성하기 시작
3. 시스템이 대기실 설정을 조회하여 미디어 제한사항을 확인 (사진 개수 제한, 음악/영상 허용 여부)
4. 사용자가 텍스트를 입력하고 이미지를 업로드하며, 허용된 경우 음악이나 영상을 첨부
5. 사용자가 작성한 컨텐츠를 저장
6. 시스템이 작성 완료 상태를 표시

**기대 결과**:
- 대기실 설정에 따른 미디어 제한사항이 명확하게 표시됨
- 사용자가 텍스트, 이미지, 음악, 영상을 자유롭게 작성할 수 있음
- 작성한 컨텐츠가 정상적으로 저장됨
- 작성 완료 상태가 명확하게 표시됨
- 사용자가 작성한 컨텐츠를 나중에 다시 불러올 수 있음

**성공 기준**:
- 대기실 설정 조회 및 표시 시간이 2초 이하
- 기존 작성 컨텐츠 조회 및 불러오기 시간이 2초 이하
- 컨텐츠 저장 성공률이 95% 이상
- 컨텐츠 저장 완료 시간이 3초 이하
- 사용자가 컨텐츠 작성 완료를 인지하는 데 걸리는 시간이 5초 이하

**Acceptance Scenarios**:
1. **Given** 사용자가 대기실 페이지에 진입했을 때, **When** 컨텐츠 작성 화면을 열면, **Then** 대기실 설정에 따른 미디어 제한사항이 명확하게 표시됨
2. **Given** 사용자가 기존에 작성한 컨텐츠가 있을 때, **When** 컨텐츠 작성 화면을 열면, **Then** 기존 작성 내용이 자동으로 불러와짐
3. **Given** 사용자가 텍스트, 이미지, 음악, 영상을 작성했을 때, **When** 저장을 선택하면, **Then** 작성한 컨텐츠가 정상적으로 저장되고 저장 완료 상태가 표시됨
4. **Given** 사용자가 대기실 설정에서 허용되지 않은 미디어를 업로드하려고 할 때, **When** 업로드를 시도하면, **Then** 적절한 제한 안내 메시지가 표시됨

---

### US2: 사용자가 작성한 컨텐츠를 수정 (Priority: P1)

**시나리오**: 사용자가 이전에 작성한 컨텐츠를 불러와서 수정할 때

**사용자 행동**:
1. 사용자가 대기실 페이지에 진입
2. 사용자가 자신이 작성한 컨텐츠를 확인
3. 사용자가 컨텐츠 수정을 시작
4. 사용자가 텍스트, 이미지, 미디어를 변경
5. 사용자가 수정사항을 저장
6. 시스템이 수정 완료 상태를 표시

**기대 결과**:
- 기존 작성 컨텐츠가 정상적으로 불러와짐
- 사용자가 컨텐츠를 자유롭게 수정할 수 있음
- 수정한 컨텐츠가 정상적으로 저장됨
- 수정 완료 상태가 명확하게 표시됨
- 수정 전 내용과 수정 후 내용이 모두 보존됨

**성공 기준**:
- 기존 컨텐츠 조회 및 불러오기 시간이 2초 이하
- 컨텐츠 수정 저장 성공률이 95% 이상
- 컨텐츠 수정 저장 완료 시간이 3초 이하
- 사용자가 컨텐츠 수정 완료를 인지하는 데 걸리는 시간이 5초 이하

**Acceptance Scenarios**:
1. **Given** 사용자가 이전에 작성한 컨텐츠가 있을 때, **When** 컨텐츠 작성 화면을 열면, **Then** 기존 작성 내용이 정확하게 불러와짐
2. **Given** 사용자가 기존 컨텐츠를 수정했을 때, **When** 저장을 선택하면, **Then** 수정한 컨텐츠가 정상적으로 저장되고 수정 완료 상태가 표시됨
3. **Given** 사용자가 컨텐츠의 일부만 수정했을 때, **When** 저장을 선택하면, **Then** 수정한 부분만 업데이트되고 나머지 내용은 그대로 유지됨

---

### US3: 사용자가 작성 중인 컨텐츠가 자동으로 저장됨 (Priority: P2)

**시나리오**: 사용자가 컨텐츠를 작성하는 중에 자동으로 저장될 때

**사용자 행동**:
1. 사용자가 컨텐츠를 작성하기 시작
2. 사용자가 텍스트를 입력하거나 이미지를 업로드하는 등 작업을 진행
3. 일정 시간 동안 사용자가 추가 작업을 하지 않음
4. 시스템이 자동으로 작성 중인 컨텐츠를 저장
5. 사용자가 계속해서 컨텐츠를 작성하거나 저장 완료를 확인

**기대 결과**:
- 작성 중인 컨텐츠가 자동으로 저장됨
- 자동 저장이 사용자의 작업을 방해하지 않음
- 자동 저장 완료 상태가 적절하게 표시됨
- 사용자가 의도치 않게 페이지를 떠나도 작성한 내용이 보존됨

**성공 기준**:
- 자동 저장이 사용자의 입력을 방해하지 않음
- 자동 저장 성공률이 90% 이상
- 자동 저장 완료 시간이 3초 이하
- 사용자가 자동 저장을 인지하는 데 걸리는 시간이 즉시 또는 1초 이하

**Acceptance Scenarios**:
1. **Given** 사용자가 컨텐츠를 작성하고 있을 때, **When** 일정 시간 동안 추가 작업을 하지 않으면, **Then** 작성 중인 컨텐츠가 자동으로 저장됨
2. **Given** 사용자가 컨텐츠를 작성 중일 때, **When** 자동 저장이 진행되면, **Then** 사용자의 입력 작업이 방해받지 않음
3. **Given** 사용자가 컨텐츠를 작성 중일 때, **When** 의도치 않게 페이지를 떠나면, **Then** 자동 저장된 내용이 보존되어 나중에 다시 불러올 수 있음

---

## 📋 기능 요구사항

### FR-001: 대기실 설정 조회 및 표시
**설명**: 대기실에 진입한 사용자가 컨텐츠를 작성하기 전에 대기실 설정을 조회하여 미디어 제한사항을 확인합니다.

**요구사항**:
- 대기실 설정을 조회해야 함 (사진 개수 제한, 음악/영상 허용 여부)
- 대기실 설정 정보를 사용자에게 명확하게 표시해야 함
- 미디어 제한사항이 컨텐츠 작성 화면에 반영되어야 함
- 대기실 설정 조회 실패 시 적절한 오류 처리를 해야 함
- 대기실 설정 조회 중 로딩 상태를 표시해야 함

**검증 기준**:
- 대기실 설정이 정상적으로 조회됨
- 사진 개수 제한이 정확하게 표시됨
- 음악/영상 허용 여부가 정확하게 표시됨
- 미디어 제한사항이 컨텐츠 작성 화면에 반영됨
- 대기실 설정 조회 실패 시 적절한 오류 메시지가 표시됨
- 대기실 설정 조회 중 로딩 상태가 표시됨

### FR-002: 기존 작성 컨텐츠 조회 및 불러오기
**설명**: 사용자가 이전에 작성한 컨텐츠가 있는 경우, 컨텐츠 작성 화면을 열 때 기존 내용을 불러옵니다.

**요구사항**:
- 사용자가 작성한 컨텐츠를 조회해야 함
- 기존 작성 컨텐츠가 있는 경우 자동으로 불러와야 함
- 불러온 컨텐츠를 컨텐츠 작성 화면에 표시해야 함
- 컨텐츠 조회 실패 시 적절한 오류 처리를 해야 함
- 컨텐츠 조회 중 로딩 상태를 표시해야 함

**검증 기준**:
- 기존 작성 컨텐츠가 정상적으로 조회됨
- 기존 작성 컨텐츠가 정확하게 불러와짐
- 불러온 컨텐츠가 컨텐츠 작성 화면에 정확하게 표시됨
- 컨텐츠 조회 실패 시 적절한 오류 메시지가 표시됨
- 컨텐츠 조회 중 로딩 상태가 표시됨

### FR-003: 텍스트 입력
**설명**: 사용자가 타임캡슐 컨텐츠의 텍스트를 입력합니다.

**요구사항**:
- 사용자가 텍스트를 입력할 수 있어야 함
- 입력한 텍스트가 실시간으로 표시되어야 함
- 텍스트 입력에 대한 유효성 검사를 수행해야 함 (필요한 경우)
- 텍스트 입력이 저장되어야 함

**검증 기준**:
- 사용자가 텍스트를 정상적으로 입력할 수 있음
- 입력한 텍스트가 실시간으로 표시됨
- 텍스트 입력이 정상적으로 저장됨

### FR-004: 이미지 업로드
**설명**: 사용자가 타임캡슐 컨텐츠에 이미지를 업로드합니다.

**요구사항**:
- 사용자가 이미지 파일을 선택하고 업로드할 수 있어야 함
- 대기실 설정에 따른 사진 개수 제한을 준수해야 함
- 이미지 파일 형식을 검증해야 함 (jpg, png, gif 등)
- 이미지 파일 크기를 검증해야 함
- 업로드한 이미지를 미리보기로 표시해야 함
- 이미지 업로드 실패 시 적절한 오류 처리를 해야 함
- 이미지 업로드 중 로딩 상태를 표시해야 함

**검증 기준**:
- 사용자가 이미지 파일을 정상적으로 업로드할 수 있음
- 대기실 설정에 따른 사진 개수 제한이 정확하게 적용됨
- 허용되지 않은 이미지 파일 형식 업로드 시 적절한 오류 메시지가 표시됨
- 허용된 크기를 초과하는 이미지 업로드 시 적절한 오류 메시지가 표시됨
- 업로드한 이미지가 미리보기로 정확하게 표시됨
- 이미지 업로드 실패 시 적절한 오류 메시지가 표시됨
- 이미지 업로드 중 로딩 상태가 표시됨

### FR-005: 음악 업로드
**설명**: 사용자가 타임캡슐 컨텐츠에 음악을 업로드합니다.

**요구사항**:
- 대기실 설정에서 음악이 허용된 경우에만 음악 업로드가 가능해야 함
- 사용자가 음악 파일을 선택하고 업로드할 수 있어야 함
- 음악 파일 형식을 검증해야 함 (mp3, wav 등)
- 음악 파일 크기를 검증해야 함
- 음악 업로드 실패 시 적절한 오류 처리를 해야 함
- 음악 업로드 중 로딩 상태를 표시해야 함

**검증 기준**:
- 대기실 설정에서 음악이 허용된 경우에만 음악 업로드가 가능함
- 사용자가 음악 파일을 정상적으로 업로드할 수 있음
- 허용되지 않은 음악 파일 형식 업로드 시 적절한 오류 메시지가 표시됨
- 허용된 크기를 초과하는 음악 업로드 시 적절한 오류 메시지가 표시됨
- 음악 업로드 실패 시 적절한 오류 메시지가 표시됨
- 음악 업로드 중 로딩 상태가 표시됨

### FR-006: 영상 업로드
**설명**: 사용자가 타임캡슐 컨텐츠에 영상을 업로드합니다.

**요구사항**:
- 대기실 설정에서 영상이 허용된 경우에만 영상 업로드가 가능해야 함
- 사용자가 영상 파일을 선택하고 업로드할 수 있어야 함
- 영상 파일 형식을 검증해야 함 (mp4, mov 등)
- 영상 파일 크기를 검증해야 함
- 영상 업로드 실패 시 적절한 오류 처리를 해야 함
- 영상 업로드 중 로딩 상태를 표시해야 함

**검증 기준**:
- 대기실 설정에서 영상이 허용된 경우에만 영상 업로드가 가능함
- 사용자가 영상 파일을 정상적으로 업로드할 수 있음
- 허용되지 않은 영상 파일 형식 업로드 시 적절한 오류 메시지가 표시됨
- 허용된 크기를 초과하는 영상 업로드 시 적절한 오류 메시지가 표시됨
- 영상 업로드 실패 시 적절한 오류 메시지가 표시됨
- 영상 업로드 중 로딩 상태가 표시됨

### FR-007: 컨텐츠 저장 (신규 작성)
**설명**: 사용자가 작성한 컨텐츠를 처음으로 저장합니다.

**요구사항**:
- 사용자가 작성한 컨텐츠(텍스트, 이미지, 음악, 영상)를 저장해야 함
- 컨텐츠 저장이 성공적으로 완료되면 저장 완료 상태를 표시해야 함
- 컨텐츠 저장 실패 시 적절한 오류 처리를 해야 함
- 컨텐츠 저장 중 로딩 상태를 표시해야 함

**검증 기준**:
- 작성한 컨텐츠가 정상적으로 저장됨
- 컨텐츠 저장 성공 시 저장 완료 상태가 명확하게 표시됨
- 컨텐츠 저장 실패 시 적절한 오류 메시지가 표시됨
- 컨텐츠 저장 중 로딩 상태가 표시됨

### FR-008: 컨텐츠 저장 (수정)
**설명**: 사용자가 이전에 작성한 컨텐츠를 수정하고 저장합니다.

**요구사항**:
- 사용자가 수정한 컨텐츠를 저장해야 함
- 수정한 부분만 업데이트되어야 함 (부분 수정 지원)
- 컨텐츠 저장이 성공적으로 완료되면 수정 완료 상태를 표시해야 함
- 컨텐츠 저장 실패 시 적절한 오류 처리를 해야 함
- 컨텐츠 저장 중 로딩 상태를 표시해야 함

**검증 기준**:
- 수정한 컨텐츠가 정상적으로 저장됨
- 수정한 부분만 정확하게 업데이트됨
- 컨텐츠 수정 저장 성공 시 수정 완료 상태가 명확하게 표시됨
- 컨텐츠 수정 저장 실패 시 적절한 오류 메시지가 표시됨
- 컨텐츠 수정 저장 중 로딩 상태가 표시됨

### FR-009: 자동 저장
**설명**: 사용자가 컨텐츠를 작성하는 중에 일정 시간 동안 추가 작업을 하지 않으면 자동으로 저장합니다.

**요구사항**:
- 사용자가 컨텐츠를 작성하는 중에 자동 저장이 트리거되어야 함
- 자동 저장이 사용자의 입력 작업을 방해하지 않아야 함
- 자동 저장 완료 상태가 적절하게 표시되어야 함
- 자동 저장 실패 시 적절한 오류 처리를 해야 함
- 자동 저장은 조용히 백그라운드에서 수행되어야 함

**검증 기준**:
- 자동 저장이 정상적으로 트리거됨
- 자동 저장이 사용자의 입력 작업을 방해하지 않음
- 자동 저장 완료 상태가 적절하게 표시됨
- 자동 저장 실패 시 적절한 오류 메시지가 표시됨
- 자동 저장이 백그라운드에서 조용히 수행됨

### FR-010: 미디어 제한사항 처리
**설명**: 대기실 설정에 따른 미디어 제한사항을 처리합니다.

**요구사항**:
- 대기실 설정에 따른 사진 개수 제한을 준수해야 함
- 대기실 설정에서 음악이 허용되지 않은 경우 음악 업로드를 차단해야 함
- 대기실 설정에서 영상이 허용되지 않은 경우 영상 업로드를 차단해야 함
- 미디어 제한사항 위반 시 적절한 안내 메시지를 표시해야 함
- 미디어 제한사항이 컨텐츠 작성 화면에 명확하게 표시되어야 함

**검증 기준**:
- 대기실 설정에 따른 사진 개수 제한이 정확하게 적용됨
- 음악이 허용되지 않은 경우 음악 업로드가 차단됨
- 영상이 허용되지 않은 경우 영상 업로드가 차단됨
- 미디어 제한사항 위반 시 적절한 안내 메시지가 표시됨
- 미디어 제한사항이 컨텐츠 작성 화면에 명확하게 표시됨

### FR-011: 오류 처리 및 사용자 안내
**설명**: 컨텐츠 작성 및 저장 과정에서 발생할 수 있는 오류를 적절하게 처리하고 사용자에게 안내합니다.

**요구사항**:
- 네트워크 오류 발생 시 명확한 오류 메시지를 표시해야 함
- 서버 오류 발생 시 적절한 안내를 제공해야 함
- 파일 업로드 실패 시 실패 원인을 명확하게 안내해야 함
- 컨텐츠 저장 실패 시 실패 원인을 명확하게 안내해야 함
- 오류 발생 시 사용자가 취할 수 있는 조치를 안내해야 함
- 오류 메시지는 사용자가 이해하기 쉬운 언어로 작성되어야 함
- 일시적 오류의 경우 재시도 옵션을 제공해야 함

**검증 기준**:
- 네트워크 오류 발생 시 명확한 오류 메시지가 표시됨
- 서버 오류 발생 시 적절한 안내가 제공됨
- 파일 업로드 실패 시 실패 원인이 명확하게 안내됨
- 컨텐츠 저장 실패 시 실패 원인이 명확하게 안내됨
- 오류 발생 시 사용자가 취할 수 있는 조치가 안내됨
- 오류 메시지가 사용자에게 이해하기 쉬움
- 일시적 오류의 경우 재시도 옵션이 제공됨

---

## 🔑 핵심 엔티티

### 타임캡슐 대기실 설정 (Capsule Waiting Room Settings)
- **의미**: 타임캡슐 대기실에서 컨텐츠 작성 시 적용되는 제약사항 및 허용 범위
- **주요 속성**:
  - 사진 개수 제한: 대기실에서 업로드할 수 있는 최대 사진 개수
  - 음악 허용 여부: 대기실에서 음악 업로드가 허용되는지 여부
  - 영상 허용 여부: 대기실에서 영상 업로드가 허용되는지 여부

### 개인 컨텐츠 (Personal Content)
- **의미**: 대기실에 참여한 사용자가 자신의 슬롯에 작성한 타임캡슐 컨텐츠
- **주요 속성**:
  - 텍스트: 사용자가 입력한 텍스트 내용
  - 이미지: 사용자가 업로드한 이미지 파일 목록
  - 음악: 사용자가 업로드한 음악 파일 (대기실 설정에서 허용된 경우)
  - 영상: 사용자가 업로드한 영상 파일 (대기실 설정에서 허용된 경우)
  - 작성 일시: 컨텐츠가 작성된 일시
  - 수정 일시: 컨텐츠가 마지막으로 수정된 일시

---

## 🚀 성공 기준

### 측정 가능한 결과

- **SC-001**: 대기실 설정 조회 및 표시 시간이 2초 이하
- **SC-002**: 기존 작성 컨텐츠 조회 및 불러오기 시간이 2초 이하
- **SC-003**: 컨텐츠 저장 성공률이 95% 이상
- **SC-004**: 컨텐츠 저장 완료 시간이 3초 이하
- **SC-005**: 사용자가 컨텐츠 작성 완료를 인지하는 데 걸리는 시간이 5초 이하
- **SC-006**: 컨텐츠 수정 저장 성공률이 95% 이상
- **SC-007**: 컨텐츠 수정 저장 완료 시간이 3초 이하
- **SC-008**: 자동 저장 성공률이 90% 이상
- **SC-009**: 자동 저장 완료 시간이 3초 이하
- **SC-010**: 자동 저장이 사용자의 입력을 방해하지 않음 (방해율 0%)

---

## 🚧 비기능 요구사항 (NFR)

### 성능
- **NFR-001**: 대기실 설정 조회 응답 시간이 2초 이하
- **NFR-002**: 기존 컨텐츠 조회 응답 시간이 2초 이하
- **NFR-003**: 컨텐츠 저장 응답 시간이 3초 이하
- **NFR-004**: 이미지 업로드 응답 시간이 5초 이하 (파일 크기에 따라 가변)
- **NFR-005**: 음악/영상 업로드 응답 시간이 10초 이하 (파일 크기에 따라 가변)

### 보안
- **NFR-006**: 모든 API 요청에 인증 토큰이 포함되어야 함
- **NFR-007**: 업로드된 파일이 안전하게 저장되어야 함
- **NFR-008**: 파일 업로드 시 파일 형식 및 크기 검증이 수행되어야 함
- **NFR-009**: 사용자는 자신의 컨텐츠만 조회하고 수정할 수 있어야 함

### 접근성
- **NFR-010**: 모든 정보가 스크린 리더를 통해 읽을 수 있어야 함
- **NFR-011**: 키보드만으로 모든 기능에 접근할 수 있어야 함
- **NFR-012**: 모든 인터랙티브 요소의 최소 터치 타겟 크기가 44px × 44px 이상

### 사용자 경험
- **NFR-013**: 컨텐츠 작성 화면이 명확하고 이해하기 쉽게 구성되어야 함
- **NFR-014**: 미디어 제한사항이 명확하게 표시되어야 함
- **NFR-015**: 파일 업로드 중 진행 상황을 사용자가 파악할 수 있어야 함
- **NFR-016**: 자동 저장이 사용자의 작업을 방해하지 않아야 함
- **NFR-017**: 오류 메시지가 사용자에게 이해하기 쉬운 언어로 작성되어야 함

### 호환성
- **NFR-018**: 주요 모바일 브라우저(Chrome, Safari, Firefox)에서 정상 동작
- **NFR-019**: 다양한 모바일 기기 화면 크기에서 레이아웃이 일관되게 표시됨
- **NFR-020**: 모바일 기준 375px 고정 레이아웃 지원

---

## 🔍 엣지 케이스 및 예외 상황

### EC-001: 대기실 설정 조회 실패
**상황**: 대기실 설정 조회 API 호출이 실패

**처리 방법**:
- 명확한 오류 메시지를 표시
- 재시도 옵션 제공
- 네트워크 오류의 경우 네트워크 연결 확인 안내
- 기본값을 사용하여 컨텐츠 작성은 계속 진행 가능하도록 함 (가능한 경우)

### EC-002: 기존 컨텐츠 조회 실패
**상황**: 기존 작성 컨텐츠 조회 API 호출이 실패

**처리 방법**:
- 명확한 오류 메시지를 표시
- 재시도 옵션 제공
- 네트워크 오류의 경우 네트워크 연결 확인 안내
- 빈 컨텐츠 작성 화면을 표시하여 사용자가 새로 작성할 수 있도록 함

### EC-003: 파일 크기 초과
**상황**: 사용자가 허용된 크기를 초과하는 파일을 업로드하려고 시도

**처리 방법**:
- 파일 크기 초과 안내 메시지를 표시
- 허용된 파일 크기를 명확하게 안내
- 파일 선택을 다시 할 수 있도록 안내

### EC-004: 파일 형식 불일치
**상황**: 사용자가 허용되지 않은 파일 형식을 업로드하려고 시도

**처리 방법**:
- 파일 형식 불일치 안내 메시지를 표시
- 허용된 파일 형식을 명확하게 안내
- 파일 선택을 다시 할 수 있도록 안내

### EC-005: 사진 개수 제한 초과
**상황**: 사용자가 대기실 설정에서 허용된 사진 개수를 초과하여 업로드하려고 시도

**처리 방법**:
- 사진 개수 제한 초과 안내 메시지를 표시
- 허용된 사진 개수를 명확하게 안내
- 기존 사진을 삭제한 후 새 사진을 업로드할 수 있도록 안내

### EC-006: 음악/영상 업로드 차단
**상황**: 사용자가 대기실 설정에서 허용되지 않은 음악/영상을 업로드하려고 시도

**처리 방법**:
- 음악/영상 업로드가 허용되지 않음을 안내 메시지로 표시
- 대기실 설정에서 음악/영상이 허용되지 않았음을 명확하게 안내
- 업로드 옵션을 비활성화하여 선택할 수 없도록 함

### EC-007: 컨텐츠 저장 실패
**상황**: 컨텐츠 저장 API 호출이 실패

**처리 방법**:
- 명확한 오류 메시지를 표시
- 재시도 옵션 제공
- 네트워크 오류의 경우 네트워크 연결 확인 안내
- 작성한 컨텐츠가 손실되지 않도록 로컬에 임시 저장 (가능한 경우)

### EC-008: 자동 저장 실패
**상황**: 자동 저장이 실패

**처리 방법**:
- 자동 저장 실패를 조용히 처리 (사용자 작업을 방해하지 않음)
- 자동 저장 재시도 로직 실행
- 사용자에게 수동 저장을 권장하는 안내 표시 (반복 실패 시)

### EC-009: 인증 토큰 만료
**상황**: 컨텐츠 작성 또는 저장 과정에서 인증 토큰이 만료

**처리 방법**:
- 인증 토큰 만료 메시지를 표시
- 로그인 페이지로 이동할 수 있는 옵션 제공
- 인증 토큰 갱신 후 재시도 옵션 제공
- 작성한 컨텐츠가 손실되지 않도록 로컬에 임시 저장 (가능한 경우)

### EC-010: 권한 없는 사용자의 컨텐츠 접근
**상황**: 인증되지 않은 사용자 또는 권한이 없는 사용자가 컨텐츠에 접근

**처리 방법**:
- 권한 없음 메시지를 표시
- 로그인 페이지로 이동할 수 있는 옵션 제공
- 적절한 접근 권한이 필요함을 안내

---

## 🎨 디자인 제약사항

### Figma 디자인 준수
- **Figma 디자인 참조**: 컨텐츠 작성 화면의 디자인은 Figma 디자인 시안을 참조합니다
- **디자인 정확도**: 모든 컴포넌트의 크기, 간격, 색상, 스타일은 Figma 디자인과 pixel-perfect 수준으로 일치해야 함
- **디자인 토큰 준수**: Figma에서 정의된 색상, 간격, 타이포그래피 등의 디자인 토큰을 프로젝트의 `tailwind.config.js`에 선언된 변수로 import하여 사용
- **중복 선언 금지**: 하드코딩된 색상 값 사용 금지, 기존에 정의된 테마 변수를 재사용

### 레이아웃
- **모바일 기준 고정값**: 레이아웃 너비는 모바일 기준 375px 고정값으로 설정됨
- **일관성**: 모든 페이지에서 레이아웃 구조가 일관되게 유지됨
- **바텀시트 사용**: 컨텐츠 작성 화면은 공통 바텀시트 컴포넌트를 사용해야 함

### 컨텐츠 작성 화면
- **정보 구조**: 컨텐츠 작성 화면이 명확하고 읽기 쉽게 구조화되어 표시됨
- **시각적 계층**: 중요한 정보(미디어 제한사항, 저장 버튼 등)가 시각적으로 강조됨
- **액션 안내**: 저장 버튼 등 다음 액션이 명확하게 표시되고 접근하기 쉬움

### 미디어 업로드
- **미리보기**: 업로드한 이미지, 음악, 영상의 미리보기가 명확하게 표시됨
- **진행 상황**: 파일 업로드 중 진행 상황을 사용자가 파악할 수 있어야 함
- **제한 안내**: 미디어 제한사항이 명확하게 표시되고 위반 시 적절한 안내가 제공됨

---

## 📊 성공 지표 (KPI)

### 사용자 경험
- **컨텐츠 작성 완료율**: 대기실에 진입한 사용자 중 컨텐츠를 작성하고 저장하는 비율이 80% 이상
- **컨텐츠 저장 성공률**: 컨텐츠 저장 시도 중 성공하는 비율이 95% 이상
- **컨텐츠 수정 빈도**: 사용자가 작성한 컨텐츠를 수정하는 평균 횟수가 1회 이상
- **자동 저장 인지율**: 자동 저장 기능을 인지하는 사용자 비율이 50% 이상

### 기술적 품질
- **대기실 설정 조회 API 성공률**: 대기실 설정 조회 API 호출 성공률이 95% 이상
- **컨텐츠 조회 API 성공률**: 컨텐츠 조회 API 호출 성공률이 95% 이상
- **컨텐츠 저장 API 성공률**: 컨텐츠 저장 API 호출 성공률이 95% 이상
- **파일 업로드 성공률**: 파일 업로드 시도 중 성공하는 비율이 90% 이상
- **오류 처리 정확도**: 오류 발생 시 적절한 메시지 표시 비율이 100%

### 비즈니스 지표
- **컨텐츠 작성 전환율**: 대기실 진입 후 컨텐츠를 작성하는 비율이 80% 이상
- **사용자 이탈률**: 컨텐츠 작성 중 이탈하는 비율이 20% 이하
- **컨텐츠 작성 만족도**: 사용자가 컨텐츠 작성 과정에 만족하는 비율이 80% 이상

---

## 🔗 기술 의존성

### 필수 의존성
- **인증 토큰**: 모든 API 요청 헤더에 인증 토큰이 포함되어야 함
- **환경 변수**: 개발 환경에서 사용할 인증 토큰은 `.env.local` 파일의 `NEXT_PUBLIC_DEV_TOKEN` 환경 변수로 관리됨
- **대기실 설정 조회 API**: 대기실 설정값을 조회하기 위한 API 엔드포인트
- **컨텐츠 조회 API**: 사용자가 작성한 컨텐츠를 조회하기 위한 API 엔드포인트
- **컨텐츠 저장 API**: 사용자가 작성한 컨텐츠를 저장하기 위한 API 엔드포인트 (신규 작성 및 수정)
- **파일 업로드 지원**: multipart/form-data 형식의 파일 업로드를 지원해야 함

### 선택적 의존성
- **로딩 상태 관리**: 컨텐츠 조회 및 저장 중 상태 표시를 위한 상태 관리
- **오류 처리**: 오류 발생 시 사용자에게 안내하기 위한 오류 처리 메커니즘
- **재시도 로직**: 일시적 오류 발생 시 재시도를 위한 로직
- **자동 저장 로직**: 일정 시간 후 자동 저장을 위한 로직
- **파일 검증**: 파일 형식 및 크기 검증을 위한 로직

---

## 📝 가정사항

### 사용자 환경
- 사용자는 모바일 기기에서 웹 애플리케이션을 주로 사용함
- 사용자는 터치 인터페이스에 익숙함
- 사용자는 파일 업로드 과정에 대해 기본적인 이해를 가지고 있음
- 사용자는 대기실에 참여한 상태임

### 기술 환경
- 인증된 사용자만 컨텐츠 작성 화면에 접근할 수 있음
- 개발 환경에서 사용할 인증 토큰은 `.env.local` 파일의 `NEXT_PUBLIC_DEV_TOKEN` 환경 변수로 선언되어 있음
- 모든 API 요청 시 인증 토큰이 필요함
- 파일 업로드는 multipart/form-data 형식으로 전송됨
- 자동 저장은 일정 시간(예: 3초) 동안 사용자 입력이 없을 때 트리거됨

### 비즈니스 규칙
- 대기실에 참여한 사용자만 자신의 컨텐츠를 작성하고 저장할 수 있음
- 사용자는 자신의 컨텐츠만 조회하고 수정할 수 있음
- 대기실 설정에 따른 미디어 제한사항이 엄격하게 적용됨
- 컨텐츠는 작성 후 저장되어야 함 (임시 저장 포함)
- 컨텐츠 수정 시 부분 수정이 지원됨

### 데이터 전달
- 대기실 설정 조회 시 대기실 ID가 필요함
- 컨텐츠 조회 및 저장 시 대기실 ID가 필요함
- 파일 업로드 시 파일 형식 및 크기 정보가 포함됨
- 컨텐츠 저장 시 텍스트, 이미지, 음악, 영상 정보가 포함됨

---

## 🚧 향후 확장 가능성

### 향후 개선 사항
- 컨텐츠 삭제 기능
- 컨텐츠 미리보기 기능
- 컨텐츠 공유 기능
- 컨텐츠 작성 히스토리 조회
- 컨텐츠 작성 초안 저장 기능
- 컨텐츠 작성 템플릿 제공
- 이미지 편집 기능 (크롭, 필터 등)
- 음악/영상 재생 기능
- 컨텐츠 작성 가이드 제공

### 확장 가능한 기능
- 여러 컨텐츠 버전 관리
- 컨텐츠 작성 협업 기능 (다른 사용자와 공동 작성)
- 컨텐츠 작성 알림 기능
- 컨텐츠 작성 통계 제공
- 컨텐츠 작성 자동 완성 기능
- 컨텐츠 작성 음성 입력 지원
