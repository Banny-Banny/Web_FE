# 기능 명세서: 알림

## 개요

사용자가 알림 모달 또는 알림 페이지에서 자신의 알림 목록을 조회하고, 새 알림을 선택하면 해당 알림이 가리키는 화면으로 이동할 수 있는 기능입니다. 읽은 알림은 "이전 알림" 영역으로 구분되며, 이전 알림은 개별 삭제할 수 있습니다.

### 배경

마이페이지에서 사용자가 받은 소식(알림)을 한곳에서 확인하고, 알림 종류에 따라 해당 콘텐츠(타임캡슐, 친구 요청 등)로 바로 이동할 수 있어야 합니다. 읽지 않은 알림과 읽은 알림을 구분하여 새 소식을 놓치지 않도록 하고, 더 이상 필요 없는 알림은 삭제할 수 있어야 합니다.

### 목적

- 사용자가 알림 모달 또는 알림 페이지에서 알림 목록을 한눈에 조회할 수 있도록 함
- "새 알림"과 "이전 알림"으로 구분하여 읽지 않은 알림을 명확히 구분함
- 새 알림을 선택하면 해당 알림이 가리키는 대상(콘텐츠·화면)으로 이동할 수 있도록 함
- 알림을 읽으면 자동으로 읽음 처리되어 이전 알림 영역으로 이동하도록 함
- 이전 알림은 사용자가 선택하여 삭제할 수 있도록 함

## 기능 요구사항

### FR-1: 알림 목록 조회

**설명**: 사용자가 알림 모달 또는 알림 페이지에 진입하면 자신의 알림 목록이 조회되어 표시됩니다.

**수락 기준**:
- 알림 모달 또는 알림 페이지 진입 시 자동으로 알림 목록을 조회하여 표시함
- 목록에는 각 알림의 요약 정보(제목·내용 요약·발생 시점 등)가 표시됨
- 목록 조회 중에는 로딩 상태를 표시함
- 목록 조회 실패 시 사용자에게 오류 메시지를 표시함
- 알림이 하나도 없을 경우 적절한 안내 메시지를 표시함

### FR-2: 새 알림과 이전 알림 구분

**설명**: 알림 목록은 "새 알림"(읽지 않음)과 "이전 알림"(읽음) 두 영역으로 구분되어 표시됩니다.

**수락 기준**:
- 화면에 "새 알림" 영역과 "이전 알림" 영역이 구분되어 표시됨
- 새 알림은 읽지 않은 알림만 포함됨
- 이전 알림은 읽음 처리된 알림만 포함됨
- 각 영역에 해당하는 알림이 없을 경우 해당 영역에 대한 안내(예: "새 알림이 없어요", "이전 알림이 없어요")를 표시할 수 있음

### FR-3: 새 알림 선택 시 해당 대상으로 이동(라우팅)

**설명**: 사용자가 새 알림 목록에서 특정 알림을 선택하면, 해당 알림이 가리키는 대상(타임캡슐, 친구 요청 등)에 맞는 화면으로 이동합니다.

**수락 기준**:
- 새 알림 목록의 각 항목은 선택(클릭·터치) 가능함
- 알림 선택 시 해당 알림의 종류·대상 정보에 따라 올바른 화면(또는 상세)으로 이동함
- 이동 대상은 알림이 참조하는 식별자(예: 타임캡슐 id, 친구 요청 id 등)에 의해 결정됨
- 사용자가 의도한 알림을 선택했을 때 해당 콘텐츠를 볼 수 있는 화면으로 이동함
- 이동 실패(대상이 없거나 오류) 시 사용자에게 오류 메시지를 표시하고, 필요 시 알림 목록으로 돌아갈 수 있음

### FR-4: 알림 읽음 처리 및 이전 알림으로 이동

**설명**: 알림을 읽은 것으로 처리되면 해당 알림은 "이전 알림" 영역으로 이동하여 표시됩니다.

**수락 기준**:
- 새 알림을 선택하여 해당 화면으로 이동했을 때, 해당 알림이 읽음으로 처리됨
- 읽음 처리된 알림은 "새 알림" 목록에서 사라지고 "이전 알림" 목록에 표시됨
- 사용자가 알림 목록을 다시 볼 때 읽음 처리 반영이 반드시 반영됨
- 읽음 처리 요청 실패 시 사용자에게 오류 메시지를 표시하고, 필요 시 재시도 방법을 제공할 수 있음

### FR-5: 이전 알림 삭제

**설명**: 사용자가 이전 알림 목록에서 특정 알림에 대한 삭제를 요청하면, 해당 알림이 목록에서 제거됩니다.

**수락 기준**:
- 이전 알림 목록의 각 항목에 삭제 기능(버튼·액션)이 제공됨
- 삭제 실행 시 해당 알림만 목록에서 제거됨
- 삭제 후 목록이 즉시 갱신되어 삭제된 항목이 보이지 않음
- 삭제 성공 시 사용자에게 성공 피드백(토스트 등)을 줄 수 있음
- 삭제 실패 시 사용자에게 오류 메시지를 표시함
- 삭제 중에는 로딩 상태를 표시하거나 해당 항목만 비활성화하여 중복 요청을 방지함

### FR-6: 알림 화면 진입 경로

**설명**: 사용자는 마이페이지 헤더의 알림 버튼을 통해 알림 모달을 열 수 있고, 마이페이지 내비게이션의 "소식" 메뉴를 통해 알림 페이지로 이동할 수 있습니다.

**수락 기준**:
- 마이페이지 헤더에서 알림 버튼 선택 시 알림 모달이 열리고, 모달 내에서 알림 목록을 조회할 수 있음
- 마이페이지 내비게이션에서 "소식" 메뉴 선택 시 알림 전용 페이지로 이동하며, 동일한 새 알림/이전 알림 구분 및 동작을 제공함
- 모달과 페이지 모두에서 새 알림·이전 알림 구분, 선택 시 라우팅, 읽음 처리, 이전 알림 삭제 동작이 일관되게 동작함

## 사용자 시나리오

### 시나리오 1: 알림 목록 조회(모달)

1. 사용자가 마이페이지 헤더의 알림 버튼을 누름
2. 알림 모달이 열리고, 새 알림과 이전 알림이 구분되어 표시됨
3. 사용자는 새 알림과 이전 알림을 각각 확인함
4. 모달을 닫으면 마이페이지로 돌아감

### 시나리오 2: 알림 목록 조회(소식 페이지)

1. 사용자가 마이페이지 내비게이션에서 "소식" 메뉴를 선택함
2. 알림 전용 페이지로 이동함
3. 새 알림 영역과 이전 알림 영역이 구분되어 표시됨
4. 사용자는 스크롤하여 전체 알림을 확인함

### 시나리오 3: 새 알림 선택 후 해당 화면으로 이동

1. 사용자가 새 알림 목록에서 "친구 A가 타임캡슐에 초대했어요" 알림을 선택함
2. 시스템이 해당 알림이 가리키는 타임캡슐(또는 초대 상세) 화면으로 이동함
3. 해당 알림은 읽음 처리되어 이전 알림으로 이동함
4. 사용자가 다시 알림 목록을 열면 해당 알림은 이전 알림 영역에 표시됨

### 시나리오 4: 이전 알림 삭제

1. 사용자가 알림 페이지(또는 모달)의 이전 알림 영역에서 특정 알림의 삭제 버튼을 누름
2. 해당 알림이 목록에서 제거됨
3. 사용자에게 삭제 완료 피드백이 표시될 수 있음
4. 목록을 새로고침하거나 다시 열어도 삭제된 알림은 더 이상 보이지 않음

### 시나리오 5: 알림이 없을 때

1. 사용자가 알림 모달 또는 소식 페이지에 진입함
2. 새 알림과 이전 알림이 모두 없음
3. "새 알림이 없어요", "이전 알림이 없어요" 등 상황에 맞는 안내 메시지가 표시됨

## 성공 기준

### SC-1: 목록 조회

- 알림 모달 또는 알림 페이지 진입 후 3초 이내에 알림 목록이 표시됨
- 표시된 목록이 새 알림/이전 알림으로 올바르게 구분됨

### SC-2: 새 알림 선택 및 이동

- 새 알림 항목 선택 후 2초 이내에 해당 알림이 가리키는 화면으로 이동함
- 이동한 화면이 해당 알림의 대상(타임캡슐, 친구 요청 등)과 일치함
- 선택한 알림이 읽음 처리되어 이전 알림 영역으로 이동함

### SC-3: 이전 알림 삭제

- 삭제 요청 후 해당 알림이 목록에서 즉시 제거됨
- 삭제 후 목록이 일관된 상태로 유지됨(다시 조회해도 삭제된 항목이 없음)

### SC-4: 사용자 경험

- 사용자가 알림을 통해 원하는 콘텐츠로 한 번에 이동할 수 있음
- 오류 발생 시 메시지와 복구 방법이 명확히 제공됨
- 모달과 소식 페이지에서 동일한 규칙으로 동작하여 혼란이 없음

## 핵심 엔티티

### 알림 (Notification)

- **식별자**: 알림을 구분하는 고유 값
- **읽음 여부**: 새 알림(읽지 않음) 또는 이전 알림(읽음) 구분에 사용
- **종류/타입**: 알림의 성격(예: 타임캡슐 초대, 친구 요청 등)—라우팅 대상 결정에 사용
- **대상 식별자**: 알림이 가리키는 콘텐츠의 식별자(타임캡슐 id, 친구 요청 id 등)—해당 화면으로 이동할 때 사용
- **요약 정보**: 제목·내용 요약·발생 시점 등 목록에 표시할 정보
- **생성 시점**: 알림이 발생한 시점—목록 정렬 또는 상대 시간 표시에 사용

### 알림 목록 응답

- **새 알림 목록**: 읽지 않은 알림들의 목록
- **이전 알림 목록**: 읽음 처리된 알림들의 목록
- 서버에서 새 알림/이전 알림을 구분하여 제공하거나, 클라이언트에서 읽음 여부로 구분하여 표시함

## 비기능 요구사항

### NFR-1: 성능

- 알림 목록 최초 로드: 3초 이내
- 새 알림 선택 후 화면 전환: 2초 이내
- 읽음 처리·삭제 요청 후 화면 반영: 2초 이내

### NFR-2: 사용자 경험

- 목록 조회·읽음 처리·삭제 시 로딩 상태가 표시됨
- 오류 시 사용자 친화적 메시지와 재시도 또는 이전 화면 이동 방법이 제공됨
- 모바일에서 터치 영역이 충분히 넓어 잘못된 선택이 최소화됨

### NFR-3: 접근성

- 키보드·스크린 리더로 알림 목록 탐색, 항목 선택, 삭제, 닫기가 가능함
- 버튼·링크에 적절한 라벨 또는 aria 속성이 제공됨

## 제약사항

- 알림 선택 시 이동 대상은 알림이 갖는 종류와 대상 식별자에 의해 결정됨(서버 또는 클라이언트 규칙에 따름)
- 삭제는 이전 알림(읽은 알림)에만 제공되며, 새 알림은 읽음 처리 후 이전 알림으로 이동한 뒤 삭제할 수 있음
- 알림 모달과 소식 페이지는 동일한 데이터 소스를 사용하여 목록·읽음·삭제 동작이 일관됨

## 가정사항

- 사용자는 로그인된 상태로 마이페이지 및 알림 화면에 접근함
- 알림 목록 조회, 읽음 처리, 삭제를 지원하는 백엔드가 존재하며, 알림 데이터에 종류·대상 식별자·읽음 여부가 포함됨
- 알림 종류와 대상 식별자에 따라 라우팅할 화면이 앱 내에서 정의되어 있음
- 알림이 없거나 조회 실패 시 사용자에게 안내할 수 있는 메시지 체계가 있음

## 엣지 케이스

### EC-1: 알림이 가리키는 대상이 이미 삭제됨

- 알림 선택 시 해당 타임캡슐·친구 요청 등이 이미 없을 경우, "콘텐츠를 찾을 수 없습니다" 등 메시지를 표시하고 알림 목록 또는 이전 화면으로 돌아갈 수 있게 함
- 필요 시 해당 알림을 읽음 처리하거나 이전 알림으로 이동시켜 목록 일관성을 유지할 수 있음

### EC-2: 목록 조회·읽음 처리·삭제 실패

- 네트워크 또는 서버 오류 시 오류 메시지를 표시하고, 재시도 또는 닫기 옵션을 제공함

### EC-3: 새 알림/이전 알림이 모두 없음

- 새 알림과 이전 알림이 없을 때 각 영역에 "새 알림이 없어요", "이전 알림이 없어요" 등 안내 메시지를 표시함

### EC-4: 동일 알림을 모달과 페이지에서 동시에 조회

- 모달에서 읽음 처리하거나 삭제한 내용이 소식 페이지에서도 반영되고, 그 반대도 일관되게 반영됨(동일 데이터 소스 사용 가정)

### EC-5: 삭제 중복 요청

- 삭제 요청이 처리되는 동안 해당 항목에 대한 추가 삭제 요청을 막거나, 이미 삭제된 항목에 대한 요청은 무시하고 목록을 갱신함
