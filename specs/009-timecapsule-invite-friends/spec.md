 # 타임캡슐 대기실 초대/참여 기능 명세서

 **Feature Branch**: `feat/timecapsule-invite-friends`  
 **Created**: 2026-01-28  
 **Status**: Draft  
 **Input**: User description: "타임캡슐 대기실 초대 및 참여 기능을 구현합니다."

 ---

 ## 📋 개요

 ### 프로젝트 목표
 사용자가 결제 완료 후 생성된 타임캡슐 대기실에 친구를 초대하고, 초대받은 사용자가 초대 코드로 대기실에 원활하게 참여할 수 있도록 합니다.  
 모바일 앱에서 이미 검증된 초대/참여 경험을 **웹 환경으로 그대로 옮기되**, 서버 API 스펙과 요청/응답 구조를 **절대 변경하지 않고** 동일한 동작을 보장하는 것을 목표로 합니다.

 ### 비즈니스 가치
 - **참여 허들 최소화**: 초대 링크 한 번으로 친구가 손쉽게 대기실에 합류할 수 있어 참여율을 극대화합니다.
 - **입소문/바이럴 강화**: 사용자가 생성한 타임캡슐이 친구 초대를 통해 자연스럽게 확산되도록 지원합니다.
 - **경험 일관성 유지**: 기존 React Native 앱과 동일한 플로우를 제공하여 플랫폼 간 경험 차이를 최소화합니다.
 - **운영 안정성 확보**: 서버 API 스펙을 변경하지 않고 재사용함으로써 백엔드 영향 범위를 최소화합니다.

 ### 범위
 - **포함**
   - 결제 완료 후 타임캡슐 대기실 생성 및 초대 코드 발급 정보 활용
   - 호스트의 초대 링크 생성 및 공유용 UI
   - 초대 링크(/room/join?invite_code=CODE) 진입 시 플로우
     - 비로그인 상태 진입 플로우
     - 로그인 상태 진입 플로우
   - 초대 코드 유효성 확인(참여 가능 여부, 상태 표시)
   - 초대 코드로 실제 방 참여(슬롯 배정) 및 대기실 진입
   - 이미 참여한 사용자의 재진입(409 ALREADY_JOINED) 처리
   - 초대 코드 오류/만료/정원 초과 등 에러 상황 안내
 - **제외**
   - 결제 페이지 및 결제 위젯 자체 구현
   - 타임캡슐 대기실 내 컨텐츠 작성/수정 기능(별도 스펙에서 정의)
   - 호스트의 방 설정 변경(개봉일, 최대 인원 등 상세 설정 UI)
   - 초대 코드 재발급/변경 기능

 ---

 ## 🎯 사용자 시나리오

 ### US1: 호스트가 결제 후 대기실을 만들고 초대 링크를 공유한다 (Priority: P1)

 **시나리오**: 사용자가 결제를 완료한 직후, 자동으로 생성된 타임캡슐 대기실 정보를 바탕으로 초대 링크를 확인·공유하는 경우

 **사용자 행동**
 1. 사용자가 결제 플로우를 완료한다.
 2. 시스템이 타임캡슐 대기실을 생성하고 초대 코드를 발급한다.
 3. 사용자는 대기실 화면 또는 완료 화면에서 초대 링크(예: `https://{web-domain}/room/join?invite_code=ABC123`)를 확인한다.
 4. 사용자가 카카오톡/메신저 등으로 초대 링크를 친구에게 공유한다.

 **기대 결과**
 - 사용자가 결제 완료 직후 초대 코드를 포함한 링크를 바로 확인할 수 있다.
 - 초대 링크는 언제/어디서든 친구가 접근 가능한 형식으로 제공된다.
 - 초대 링크 공유 동작에 추가 인증이나 복잡한 절차가 필요하지 않는다.

 **성공 기준**
 - 결제 완료 후 3초 이내에 초대 코드와 초대 링크가 화면에 노출된다.
 - 대기실 생성 성공률 98% 이상.
 - 초대 링크 복사/공유 버튼 클릭 성공률 99% 이상.

 ---

 ### US2: 비로그인 사용자가 초대 링크로 대기실에 합류한다 (Priority: P1)

 **시나리오**: 아직 로그인하지 않은 사용자가 메신저에서 초대 링크를 눌러 웹으로 진입하는 경우

 **사용자 행동**
 1. 사용자가 메신저에서 초대 링크(예: `/room/join?invite_code=ABC123`)를 클릭한다.
 2. 브라우저에서 초대 참여 페이지가 열린다.
 3. 시스템이 사용자가 로그인 상태인지 확인한다.
 4. 비로그인 상태이면, 사용자는 온보딩/로그인 페이지로 안내된다.
 5. 온보딩/로그인을 완료한 후, 사용자는 자동으로 다시 초대 참여 페이지로 돌아온다.
 6. 사용자는 방 정보를 확인하고 “참여하기” 버튼을 눌러 대기실에 합류한다.

 **기대 결과**
 - 사용자는 초대 링크 클릭 후 로그인/온보딩만 마치면 별도 코드 재입력 없이 해당 대기실로 이어진다.
 - 초대 코드는 로그인 전후에 안정적으로 유지되어 사용자가 다시 입력할 필요가 없다.
 - 초대 코드가 유효한 경우, 참여 가능 여부와 방 정보를 명확히 확인한 뒤 참여할 수 있다.

 **성공 기준**
 - 비로그인 초대 링크 진입 후 최종 대기실 입장 완료 비율 90% 이상.
 - 로그인/온보딩 완료 후 초대 페이지로의 자동 복귀 성공률 99% 이상.
 - 비로그인 진입 사용자의 95% 이상이 초대 코드를 다시 입력하지 않고 참여를 완료.

 ---

 ### US3: 로그인 사용자가 초대 링크로 바로 참여한다 (Priority: P1)

 **시나리오**: 이미 로그인되어 있는 사용자가 초대 링크를 클릭해 바로 방 정보를 확인하고 참여하는 경우

 **사용자 행동**
 1. 로그인 상태의 사용자가 초대 링크를 클릭한다.
 2. 초대 참여 페이지에서 방 정보(캡슐 이름, 개봉일, 마감일, 현재 인원/최대 인원, 상태)를 확인한다.
 3. 참여 가능하다면 “참여하기” 버튼을 클릭한다.
 4. 사용자는 대기실로 이동하여 자신의 슬롯을 확인한다.

 **기대 결과**
 - 로그인 상태에서는 추가적인 로그인 단계를 거치지 않는다.
 - 참여 가능한 경우, 1~2단계의 조작만으로 대기실에 입장할 수 있다.
 - 참여 불가능한 경우, 그 사유(정원 초과, 마감, 만료 등)가 명확히 표시된다.

 **성공 기준**
 - 로그인 상태 초대 링크 진입 후 5초 이내에 방 정보와 참여 가능 여부가 표시된다.
 - is_joinable이 true인 경우, “참여하기” 버튼 클릭 시 95% 이상이 대기실 입장에 성공한다.
 - 참여 불가능한 사용자의 95% 이상이 이유를 이해할 수 있다(정원, 마감, 만료 등).

 ---

 ### US4: 이미 참여한 사용자가 초대 링크를 다시 눌렀을 때 (409 ALREADY_JOINED) (Priority: P1)

 **시나리오**: 이미 해당 대기실에 참여 중인 사용자가 초대 링크를 다시 눌러 재참여를 시도하는 경우

 **사용자 행동**
 1. 이미 특정 대기실에 슬롯이 배정된 사용자가 동일한 초대 링크를 다시 클릭한다.
 2. 사용자는 방 정보와 함께 “참여하기” 버튼을 다시 누른다.
 3. 시스템은 서버에서 “이미 참여한 사용자” 응답을 받는다.
 4. 사용자는 추가 에러 없이 자신의 슬롯이 있는 대기실 화면으로 이동한다.

 **기대 결과**
 - 사용자는 에러 메시지 없이 자연스럽게 자신의 대기실 화면으로 연결된다.
 - 이미 참여한 상태라는 기술적인 디테일을 의식하지 않아도 된다.

 **성공 기준**
 - ALREADY_JOINED 케이스에서 에러 메시지가 노출되지 않고, 99% 이상이 정상적으로 대기실 화면으로 이동.
 - 사용자의 95% 이상이 “다시 입장” 경험을 문제없이 완료.

 ---

 ### US5: 초대 코드가 유효하지 않거나 참여 불가한 경우 (Priority: P1)

 **시나리오**: 사용자가 잘못된 코드, 만료된 코드, 정원 초과 상태의 코드 등으로 진입하는 경우

 **사용자 행동**
 1. 사용자가 초대 링크를 클릭하거나 초대 코드를 직접 입력하여 참여를 시도한다.
 2. 시스템이 초대 코드 정보를 조회한다.
 3. 코드가 잘못되었거나 존재하지 않거나, 이미 만료/정원 초과 등으로 참여 불가인 경우, 사용자는 화면에서 그 사유를 확인한다.

 **기대 결과**
 - 사용자는 코드가 왜 사용 불가능한지 한눈에 이해할 수 있다.
 - 사용자는 다시 시도하거나 다른 행동(홈으로 이동 등)을 선택할 수 있다.

 **성공 기준**
 - 잘못된/존재하지 않는 코드에 대해 100% “유효하지 않은/존재하지 않는 코드” 메시지 노출.
 - 마감/정원 초과/만료 등 각 상태별 안내 메시지 이해도 90% 이상.
 - 에러 상황에서 사용자가 이탈하지 않고 다른 대안을 선택하는 비율 60% 이상.

 ---

 ## 📋 기능 요구사항 (FR)

 ### FR-001: 방 생성 후 초대 정보 노출
 **설명**: 결제 완료 후 생성된 타임캡슐 대기실의 초대 정보를 사용자에게 제공해야 합니다.

 **요구사항**
 - 결제 완료 후 생성된 대기실에 대해, 캡슐/대기실 이름, 초대 코드, 개봉일, 마감일, 최대 인원, 현재 인원 등의 기본 정보를 표시해야 한다.
 - 초대 코드가 포함된 웹 초대 링크를 사용자가 알 수 있는 형태로 제공해야 한다.
 - 초대 링크 복사 및 공유를 위한 UI 요소(버튼 등)를 제공해야 한다.
 - 초대 코드는 6자리 영숫자로 표시되며, 사용자는 대소문자 구분 없이 인식하는 것으로 이해할 수 있어야 한다.

 **검증 기준**
 - 결제 완료 후 화면에 초대 코드와 초대 링크가 항상 노출된다.
 - 초대 링크 복사/공유 UI를 통해 링크를 다른 앱에 전달할 수 있다.

 ---

 ### FR-002: 초대 링크 진입 시 로그인 상태 분기 처리
 **설명**: 초대 링크 `/room/join?invite_code={code}`로 진입할 때, 로그인 여부에 따라 적절한 플로우로 분기합니다.

 **요구사항**
 - 시스템은 초대 링크 진입 시 사용자가 로그인 상태인지 확인해야 한다.
 - 비로그인 상태인 경우:
   - 사용자가 클릭한 초대 코드 정보를 사용자 기기에 임시 저장해야 한다.
   - 온보딩/로그인 페이지로 안내해야 한다.
   - 온보딩/로그인 완료 후, 임시 저장된 초대 코드 정보를 사용해 다시 초대 참여 페이지로 자동 이동해야 한다.
   - 재진입 후 임시 저장된 초대 코드 정보는 더 이상 남지 않도록 정리해야 한다.
 - 로그인 상태인 경우:
   - 별도의 로그인 과정 없이 곧바로 초대 코드 검증 및 방 정보 조회를 진행해야 한다.

 **검증 기준**
 - 비로그인 사용자가 초대 링크 진입 후 로그인/온보딩만 마치면, 동일한 대기실 초대 페이지로 자동 복귀한다.
 - 로그인 상태 사용자는 추가 로그인 요구 없이 바로 방 정보 확인 화면으로 이동한다.

 ---

 ### FR-003: 초대 코드로 방 정보 조회 및 표시
 **설명**: 초대 코드의 유효성을 확인하고, 사용자가 참여 여부를 판단할 수 있도록 방 정보를 보여줍니다.

 **요구사항**
 - 초대 코드로 조회한 결과에 포함된 다음 정보를 사용자에게 가독성 있게 표시해야 한다:
   - 캡슐/대기실 이름
   - 개봉일(open_date)
   - 작성 마감시한(deadline)
   - 현재 인원 수(current_participants) / 최대 인원 수(participant_count)
   - 상태(status: 대기/완료/만료 등)
   - 현재 초대로 참여 가능한지 여부(is_joinable)
 - 사용자는 이 화면에서 현재 대기실 상태와 참여 가능 여부를 직관적으로 이해할 수 있어야 한다.
 - is_joinable이 true인 경우에만 “참여하기” 버튼이 활성화되어야 한다.
 - is_joinable이 false인 경우, 버튼 대신 참여 불가 사유를 강조해서 표시해야 한다.

 **검증 기준**
 - 모든 필수 정보가 누락 없이 표시된다.
 - 참여 불가 상태에서 “참여하기” 버튼이 비활성화되거나 노출되지 않는다.
 - 참여 가능 여부에 따라 사용자가 다음 행동을 쉽게 선택할 수 있다.

 ---

 ### FR-004: 초대 코드로 실제 방 참여(슬롯 배정)
 **설명**: 참여 가능한 초대 코드인 경우, 사용자가 “참여하기”를 선택하면 대기실에 실제로 합류할 수 있어야 합니다.

 **요구사항**
 - 사용자가 “참여하기”를 클릭하면, 현재 보고 있는 방에 대한 참여 요청이 진행되어야 한다.
 - 참여 요청이 처리되는 동안 로딩 상태를 표시해야 한다.
 - 참여 성공 시, 사용자는 자신의 슬롯 번호와 함께 대기실 화면으로 이동해야 한다.
 - 참여에 성공하면, 재접속 시에도 동일한 대기실로 자연스럽게 이동할 수 있어야 한다.
 - 참여 실패 시, 이유에 따라 적절한 안내 메시지를 표시하고, 사용자가 취할 수 있는 다음 행동(다시 시도, 홈으로 이동 등)을 제안해야 한다.

 **검증 기준**
 - is_joinable이 true인 상태에서 “참여하기”를 클릭하면, 95% 이상이 정상적으로 대기실에 합류한다.
 - 참여 시 일정 시간(예: 3초) 내에 결과(성공/실패)가 사용자에게 전달된다.

 ---

 ### FR-005: 이미 참여한 사용자의 재입장 처리
 **설명**: 이미 슬롯이 배정된 사용자가 다시 초대 링크를 통해 진입할 때, 에러 없이 자신의 대기실로 안내합니다.

 **요구사항**
 - 이미 해당 대기실에 참여한 사용자가 다시 초대 링크를 통해 참여를 시도하는 경우, 별도의 오류 화면을 보여주지 않아야 한다.
 - 이 경우에도 참여 결과를 “성공한 참여”와 동일하게 간주하고, 사용자를 자신의 슬롯이 포함된 대기실 화면으로 이동시켜야 한다.
 - 슬롯 번호 정보가 제공되는 경우, 사용자는 자신의 슬롯 위치를 즉시 확인할 수 있어야 한다.
 - 슬롯 번호 정보가 제공되지 않는 예외적인 경우에도, 사용자가 혼란스럽지 않도록 “이미 참여 중인 대기실로 이동”과 같은 안내를 제공해야 한다.

 **검증 기준**
 - 이미 참여한 사용자가 초대 링크를 다시 눌러도 에러 메시지를 보지 않고 대기실 화면에 도달한다.
 - 사용자 설문/피드백 기준, 해당 플로우에 대한 혼란도를 최소화한다.

 ---

 ### FR-006: 초대 코드 관련 에러 및 예외 처리
 **설명**: 초대 코드가 잘못되었거나, 존재하지 않거나, 더 이상 사용할 수 없는 경우 사용자에게 명확한 안내를 제공합니다.

 **요구사항**
 - 코드 형식 오류(6자리 영숫자가 아닌 경우)에 대해 “유효하지 않은 초대 코드입니다.”와 같은 메시지를 표시해야 한다.
 - 존재하지 않는 코드에 대해 “존재하지 않는 초대 코드입니다.”라는 메시지를 표시해야 한다.
 - 참여 마감, 만료, 정원 초과 등의 사유로 is_joinable이 false인 경우:
   - 상태에 따라 “작성 마감시한이 지났습니다.”, “정원이 초과되었습니다.” 등 구체적인 메시지를 제공해야 한다.
 - 서버에서 참여가 불가능하다고 응답하는 기타 오류 코드에 대해서는, 일반적인 실패 메시지(예: “대기실에 참여할 수 없습니다.”)와 함께 재시도 또는 다른 행동을 안내해야 한다.
 - 사용자 입장에서 기술적인 에러 코드 대신 자연어로 이해 가능한 메시지만 노출해야 한다.

 **검증 기준**
 - 각 에러 상황에 맞는 메시지가 정확하게 노출된다.
 - 에러 화면/상태에서도 사용자가 홈으로 돌아가거나 다른 행동을 선택할 수 있는 버튼이 제공된다.

 ---

 ### FR-007: 초대 링크 입력/진입 UI
 **설명**: 사용자가 링크 클릭 외에도 초대 코드를 직접 입력해 참여 플로우를 시작할 수 있도록 합니다(필요 시).

 **요구사항**
 - (선택적) 사용자가 초대 코드를 직접 입력할 수 있는 입력 필드를 제공할 수 있다.
 - 사용자가 알파벳 대소문자를 섞어 입력하더라도, 동일한 코드로 인식된다는 점을 시각적으로 암시하거나 설명해야 한다.
 - 입력된 코드가 유효하면, 링크를 통해 진입했을 때와 동일한 방 정보 조회 및 참여 플로우로 연결되어야 한다.

 **검증 기준**
 - 직접 입력한 코드로도 링크 클릭과 동일한 경험을 제공한다.

 ---

 ## 🔑 핵심 엔티티

 ### 타임캡슐 대기실 (Room/Capsule)
 - **의미**: 참여자들이 컨텐츠를 작성하기 위해 모이는 공간. 결제 완료 후 생성되며, 초대 코드를 통해 식별·접근됩니다.
 - **주요 속성(개념 수준)**:
   - 대기실 ID(캡슐 ID): 방을 식별하는 고유 값
   - 캡슐/대기실 이름
   - 개봉일
   - 작성 마감시한
   - 최대 참여 인원 수
   - 현재 참여 인원 수
   - 상태(대기 중, 완료, 만료 등)

 ### 초대 코드 (Invite Code)
 - **의미**: 친구가 대기실에 합류하기 위해 사용하는 6자리 영숫자 코드.
 - **특징**
   - 6자리 영숫자 문자열
   - 사용자는 대소문자를 구분하지 않고 입력할 수 있음
   - 링크 형식으로도 전달 가능 (`/room/join?invite_code=CODE`)
   - 코드의 유효성 및 참여 가능 여부는 서버에서 판단

 ### 슬롯 (Slot)
 - **의미**: 대기실 내에서 한 명의 참여자가 차지하는 자리.
 - **주요 속성(개념 수준)**:
   - 슬롯 번호
   - 닉네임
   - 참여 시각

 ### 호스트 (Host) 및 게스트 (Participant)
 - **호스트**
   - 결제를 통해 방을 생성한 사용자
   - 초대 코드 및 링크를 발급받아 공유하는 주체
 - **게스트**
   - 초대 링크나 초대 코드를 통해 대기실에 참여하는 사용자

 ### 초대 링크 (Invite Link)
 - **의미**: 초대 코드가 포함된 웹 URL로, 메신저/소셜을 통해 공유됩니다.
 - **형태(개념 수준)**: `https://{web-domain}/room/join?invite_code={invite_code}`
 - 클릭 시 초대 참여 플로우(로그인 분기, 방 조회, 참여)를 시작하는 진입점 역할을 함.

 ---

 ## 🚀 성공 기준 (SC)

 ### 사용성 및 플로우 관점
 - **SC-001**: 초대 링크를 통해 유입된 사용자 중, 로그인/온보딩을 포함해 최종적으로 대기실 입장까지 완료하는 비율이 85% 이상.
 - **SC-002**: 로그인된 사용자가 초대 링크를 클릭한 시점부터 대기실 화면을 보기까지의 평균 시간이 5초 이하.
 - **SC-003**: 비로그인 사용자가 초대 링크를 클릭한 후, 로그인/온보딩을 마치고 다시 초대 페이지로 복귀하는 성공률이 99% 이상.

 ### 정확성 및 안정성 관점
 - **SC-004**: 잘못되었거나 존재하지 않는 초대 코드에 대해, 100% “유효하지 않은/존재하지 않는 코드” 메시지가 노출됨.
 - **SC-005**: 참여 불가 상태(마감, 정원 초과, 만료 등)에서 is_joinable이 false인 경우, 100% 참여 불가 메시지가 노출되고 “참여하기” 버튼이 활성화되지 않음.
 - **SC-006**: 이미 참여한 사용자가 초대 링크를 다시 클릭하는 경우, 99% 이상에서 에러 없이 해당 대기실로 진입.

 ### 성능 관점
 - **SC-007**: 초대 링크 진입 후 방 정보 조회 및 표시까지 걸리는 시간이 3초 이하인 요청 비율 95% 이상.
 - **SC-008**: 참여 요청(“참여하기”)에 대한 결과(성공/실패) 응답 시간이 3초 이하인 경우가 95% 이상.

 ---

 ## 🚧 비기능 요구사항 (NFR)

 ### 성능
 - **NFR-001**: 초대 참여 페이지 최초 로딩 시간 2초 이하(네트워크 양호 환경 기준).
 - **NFR-002**: 방 정보 조회 응답 시간이 2초 이하인 비율 95% 이상.
 - **NFR-003**: 참여 요청 처리 응답 시간이 3초 이하인 비율 95% 이상.

 ### 보안 및 권한
 - **NFR-004**: 대기실 참여, 생성과 같이 사용자 계정에 귀속되는 행동은 인증된 사용자만 수행할 수 있어야 함.
 - **NFR-005**: 초대 코드로 방 정보를 조회하는 기능은 공개 API로, 로그인 여부와 무관하게 방의 기본 정보만 노출해야 함.
 - **NFR-006**: 초대 코드, 대기실 ID 등 식별 정보는 URL 또는 화면에 노출되더라도 민감 정보(결제 정보 등)를 유추할 수 없어야 함.

 ### UX 및 접근성
 - **NFR-007**: 모바일 기준 375px 고정 레이아웃을 사용하며, 기존 타임캡슐 화면들과 일관된 구조를 유지해야 함.
 - **NFR-008**: 초대 코드, 참여 가능 여부, 에러 메시지 등 핵심 정보는 한 화면 내에서 스크롤 없이 확인 가능해야 함(모바일 기준).
 - **NFR-009**: 색상, 타이포그래피, 간격 등은 프로젝트 공통 디자인 토큰을 사용하여 구현해야 함.
 - **NFR-010**: 버튼과 링크는 터치 디바이스에서 최소 44px × 44px 이상의 터치 영역을 가져야 함.

 ---

 ## 🔍 엣지 케이스 및 예외 상황

 ### EC-001: 잘못된 형식의 초대 코드
 - **상황**: 6자리가 아니거나, 영숫자가 아닌 문자가 포함된 코드로 진입/입력.
 - **처리**:
   - “유효하지 않은 초대 코드입니다.” 메시지를 표시.
   - 사용자가 코드를 다시 입력하거나 홈으로 이동할 수 있는 선택지를 제공.

 ### EC-002: 존재하지 않는 초대 코드
 - **상황**: 형식은 맞지만 실제로 존재하지 않는 초대 코드.
 - **처리**:
   - “존재하지 않는 초대 코드입니다.” 메시지를 표시.
   - 잘못 전달된 링크일 수 있다는 안내와 함께, 호스트에게 재요청하거나 홈으로 이동할 수 있는 안내 제공.

 ### EC-003: 참여 마감/만료된 초대 코드
 - **상황**: 이미 작성 마감시한이 지난 경우 또는 만료 상태인 코드.
 - **처리**:
   - “작성 마감시한이 지났습니다.” 또는 이에 상응하는 메시지를 표시.
   - 참여가 더 이상 불가능함을 명확히 전달하고, 다른 액션(이전 페이지, 홈 등) 제공.

 ### EC-004: 정원 초과(슬롯 가득 참)
 - **상황**: 이미 최대 인원에 도달한 상태에서 추가 참여 시도.
 - **처리**:
   - “정원이 초과되었습니다.”라는 메시지를 표시.
   - 참여할 수 없다는 점을 명확히 하고, 다른 행동 선택지를 제공.

 ### EC-005: 이미 참여한 사용자의 재참여 시도
 - **상황**: 사용자가 이미 해당 대기실에 참여한 상태에서 초대 링크를 다시 클릭하거나 “참여하기”를 다시 누름.
 - **처리**:
   - 에러 화면 대신, 사용자를 자신의 대기실 화면으로 즉시 이동.
   - 슬롯 번호 정보가 있는 경우, 기존 슬롯을 기준으로 화면을 구성.

 ### EC-006: 로그인 도중 초대 코드 정보 유실
 - **상황**: 비로그인 사용자가 초대 링크로 들어와 로그인/온보딩 과정에서 브라우저 종료, 새로고침 등으로 인해 임시 저장된 코드 정보가 사라짐.
 - **처리**:
   - 초대 코드 정보 없이 초대 참여 페이지로 복귀한 경우, 일반적인 진입 실패 안내 화면을 제공.
   - 사용자가 초대 링크를 다시 클릭하도록 안내.

 ### EC-007: 방 정보 조회 실패
 - **상황**: 네트워크 오류나 서버 오류로 인해 초대 코드로 방 정보를 가져오지 못함.
 - **처리**:
   - “대기실 정보를 불러오지 못했습니다.”와 같은 일반적인 오류 메시지를 표시.
   - 재시도 버튼과 홈으로 이동 버튼 제공.

 ### EC-008: 참여 요청 실패 (기타 오류)
 - **상황**: 참여 요청 시 서버에서 참여 불가하지만 구체적인 사유를 알 수 없는 오류가 발생.
 - **처리**:
   - “대기실에 참여할 수 없습니다.”와 같은 일반적인 메시지 표시.
   - 일정 횟수까지 재시도 옵션 제공 가능.

 ---

 ## 📌 제약사항 및 준수 사항

 - **서버 스펙 변경 금지**: 기존에 정의된 타임캡슐 대기실 관련 서버 API(방 생성, 초대 코드 조회, 참여 API)의 URL, 메서드, 요청/응답 필드, 에러 코드 구조는 변경하지 않는다.
 - **타입 및 필드명 변경 금지**: 초대 코드 조회, 참여, 방 생성에 사용되는 타입의 필드명, 타입 정의는 그대로 사용해야 한다.
 - **플랫폼 간 동작 일치**: 기존 React Native 앱과 웹의 초대/참여 플로우는 기능적으로 동일하게 동작해야 한다(초대 코드 처리, 참여 가능 여부 판단, ALREADY_JOINED 처리 등).
 - **초대 코드 규칙 준수**: 초대 코드는 6자리 영숫자이며, 사용자 입력에서는 대소문자 구분 없이 동작해야 한다.
 - **Public API 인식**: 초대 코드로 방 정보를 조회하는 기능은 인증 없이도 호출될 수 있는 공개 엔드포인트로, 이 점을 고려하여 UX를 설계한다.

 ---

 ## 📝 가정사항

 ### 사용자 및 환경 가정
 - 사용자는 주로 모바일 환경(375px 기준)에서 초대 링크를 통해 유입된다.
 - 사용자는 메신저/소셜 앱에서 웹 브라우저 또는 인앱 브라우저로 초대 링크를 연다.
 - 사용자는 기본적인 로그인/온보딩 과정을 이미 경험해 보았으며, 계정 생성에 대한 거부감이 크지 않다고 가정한다.

 ### 시스템 및 데이터 가정
 - 결제 완료 후 대기실 생성 및 초대 코드 발급은 이미 성공적으로 수행된 상태에서 본 초대/참여 플로우가 시작된다.
 - 초대 코드가 유효한 동안, 대응되는 대기실은 삭제되거나 비활성화되지 않는다고 가정한다.
 - 동일 사용자가 동일 대기실에 여러 번 참여를 시도하더라도, 서버는 중복 참여를 방지하기 위한 적절한 응답을 제공한다.

 ---

 ## 🚧 향후 확장 가능성

 - 초대 코드 재발급 또는 공유 편의 기능(예: QR 코드, 소셜 공유 템플릿).
 - 초대 링크의 만료 안내 및 새로운 초대 코드 요청 플로우.
 - 초대 수락/거절 상태 관리(수락 전 대기, 거절 등)를 포함한 보다 정교한 초대 시스템.
 - 대기실 참여 현황을 바탕으로 한 알림 기능(예: 새로운 친구가 참여했을 때 푸시/알림).

