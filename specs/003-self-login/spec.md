# TimeEgg 자체 로그인 기능 명세서

## 📋 개요

### 프로젝트 목표
TimeEgg 웹 애플리케이션에서 사용자가 전화번호 또는 이메일과 비밀번호를 사용하여 자체 계정으로 로그인할 수 있는 기능을 제공합니다.

### 비즈니스 가치
- **사용자 접근성**: 사용자가 기존에 생성한 자체 계정으로 간편하게 로그인할 수 있음
- **보안**: 비밀번호 기반 인증을 통해 사용자 계정 보호
- **유연성**: 전화번호 또는 이메일 중 선택하여 로그인 가능
- **사용자 경험**: 로그인 후 자동으로 인증된 상태로 애플리케이션 주요 기능에 접근 가능

### 범위
- **포함**: 로그인 폼 UI, 자격 증명 입력 및 검증, 로그인 API 호출, 인증 토큰 저장, 로그인 성공/실패 처리, 회원가입 페이지로의 이동 링크
- **제외**: 소셜 로그인 기능, 비밀번호 찾기 기능, 회원가입 기능 (별도 명세서에서 다룸), 토큰 갱신 로직 (기존 시스템 활용)

---

## 🎯 사용자 시나리오

### US1: 전화번호로 로그인 성공

**시나리오**: 사용자가 전화번호와 비밀번호를 사용하여 로그인할 때

**사용자 행동**:
1. 사용자가 로그인 페이지에 접근
2. 사용자가 전화번호 입력 필드에 전화번호를 입력
3. 사용자가 비밀번호 입력 필드에 비밀번호를 입력
4. 사용자가 로그인 버튼을 클릭

**기대 결과**:
- 입력한 자격 증명이 서버로 전송됨
- 인증에 성공하면 사용자에게 인증 토큰이 발급됨
- 인증 토큰이 안전하게 저장됨
- 사용자가 애플리케이션의 주요 기능 페이지로 자동 이동됨
- 사용자가 인증된 상태로 애플리케이션을 사용할 수 있음

**성공 기준**:
- 로그인 성공률이 95% 이상 (유효한 자격 증명 제공 시)
- 로그인 요청 후 응답까지의 시간이 3초 이하
- 로그인 성공 후 주요 기능 페이지로 이동 성공률 100%
- 인증 토큰이 안전하게 저장되어 이후 요청에서 사용 가능

### US2: 이메일로 로그인 성공

**시나리오**: 사용자가 이메일과 비밀번호를 사용하여 로그인할 때

**사용자 행동**:
1. 사용자가 로그인 페이지에 접근
2. 사용자가 이메일 입력 필드에 이메일을 입력
3. 사용자가 비밀번호 입력 필드에 비밀번호를 입력
4. 사용자가 로그인 버튼을 클릭

**기대 결과**:
- 입력한 자격 증명이 서버로 전송됨
- 인증에 성공하면 사용자에게 인증 토큰이 발급됨
- 인증 토큰이 안전하게 저장됨
- 사용자가 애플리케이션의 주요 기능 페이지로 자동 이동됨
- 사용자가 인증된 상태로 애플리케이션을 사용할 수 있음

**성공 기준**:
- 로그인 성공률이 95% 이상 (유효한 자격 증명 제공 시)
- 로그인 요청 후 응답까지의 시간이 3초 이하
- 로그인 성공 후 주요 기능 페이지로 이동 성공률 100%
- 인증 토큰이 안전하게 저장되어 이후 요청에서 사용 가능

### US3: 잘못된 자격 증명으로 로그인 실패

**시나리오**: 사용자가 잘못된 전화번호/이메일 또는 비밀번호를 입력하여 로그인에 실패할 때

**사용자 행동**:
1. 사용자가 로그인 페이지에 접근
2. 사용자가 잘못된 전화번호 또는 이메일을 입력
3. 사용자가 잘못된 비밀번호를 입력
4. 사용자가 로그인 버튼을 클릭

**기대 결과**:
- 입력한 자격 증명이 서버로 전송됨
- 서버에서 인증 실패 응답을 받음
- 사용자에게 명확한 오류 메시지가 표시됨
- 사용자가 자격 증명을 다시 입력할 수 있음
- 입력 필드가 초기화되지 않고 사용자가 수정할 수 있음

**성공 기준**:
- 인증 실패 시 사용자에게 오류 메시지 표시율 100%
- 오류 메시지가 사용자가 이해하기 쉬운 언어로 표시됨
- 사용자가 자격 증명을 다시 입력할 수 있는 상태 유지
- 로그인 실패 후에도 페이지가 정상적으로 동작함

### US4: 비활성화된 계정 또는 SNS 계정으로 로그인 시도

**시나리오**: 사용자가 비활성화된 계정 또는 SNS 계정으로 자체 로그인을 시도할 때

**사용자 행동**:
1. 사용자가 로그인 페이지에 접근
2. 사용자가 비활성화된 계정 또는 SNS 계정의 자격 증명을 입력
3. 사용자가 로그인 버튼을 클릭

**기대 결과**:
- 입력한 자격 증명이 서버로 전송됨
- 서버에서 계정 상태 오류 응답을 받음
- 사용자에게 적절한 오류 메시지가 표시됨
- 사용자가 상황을 이해하고 적절한 조치를 취할 수 있음

**성공 기준**:
- 계정 상태 오류 시 사용자에게 명확한 오류 메시지 표시율 100%
- 오류 메시지가 사용자가 이해하기 쉬운 언어로 표시됨
- 사용자가 다른 로그인 방법을 시도하거나 지원팀에 문의할 수 있음

### US5: 회원가입 페이지로 이동

**시나리오**: 사용자가 계정이 없어 회원가입 페이지로 이동하려고 할 때

**사용자 행동**:
1. 사용자가 로그인 페이지에 접근
2. 사용자가 회원가입 링크 또는 버튼을 클릭

**기대 결과**:
- 사용자가 회원가입 페이지로 이동함
- 회원가입 페이지에서 계정을 생성할 수 있음

**성공 기준**:
- 회원가입 링크/버튼 클릭 시 회원가입 페이지로 이동 성공률 100%
- 회원가입 페이지 이동 시간이 1초 이하

---

## 📋 기능 요구사항

### FR-001: 로그인 폼 구성
**설명**: 사용자가 전화번호 또는 이메일과 비밀번호를 입력할 수 있는 폼을 제공합니다.

**요구사항**:
- 전화번호 또는 이메일 입력 필드가 표시됨
- 비밀번호 입력 필드가 표시됨
- 로그인 버튼이 표시됨
- 회원가입 페이지로 이동할 수 있는 링크 또는 버튼이 표시됨
- 폼 디자인이 제공된 Figma 디자인과 일치함

**검증 기준**:
- 전화번호/이메일 입력 필드가 표시됨
- 비밀번호 입력 필드가 표시됨
- 로그인 버튼이 표시됨
- 회원가입 링크/버튼이 표시됨
- 디자인이 Figma 디자인과 시각적으로 일치함

### FR-002: 입력 필드 유효성 검증
**설명**: 사용자가 입력한 전화번호/이메일과 비밀번호의 기본 형식을 검증합니다.

**요구사항**:
- 전화번호 또는 이메일 중 하나 이상이 입력되어야 함
- 비밀번호가 입력되어야 함
- 입력 형식이 올바르지 않으면 사용자에게 피드백을 제공함
- 모든 필수 입력이 완료되기 전에는 로그인 버튼이 비활성화되거나 적절한 안내를 제공함

**검증 기준**:
- 필수 입력 필드가 비어있을 때 사용자에게 피드백 제공
- 입력 형식이 올바르지 않을 때 사용자에게 피드백 제공
- 모든 필수 입력이 완료되었을 때 로그인 버튼 활성화

### FR-003: 로그인 API 호출
**설명**: 사용자가 입력한 자격 증명을 서버로 전송하여 인증을 요청합니다.

**요구사항**:
- 로그인 버튼 클릭 시 입력한 자격 증명이 서버로 전송됨
- 전화번호 또는 이메일 중 하나와 비밀번호가 함께 전송됨
- 로그인 요청 중에는 적절한 로딩 상태가 표시됨
- 로그인 요청 중에는 중복 요청이 방지됨

**검증 기준**:
- 로그인 버튼 클릭 시 서버로 자격 증명 전송
- 로그인 요청 중 로딩 상태 표시
- 로그인 요청 중 중복 요청 방지

### FR-004: 인증 성공 처리
**설명**: 서버에서 인증에 성공하면 인증 토큰을 받아 저장하고 사용자를 적절한 페이지로 이동시킵니다.

**요구사항**:
- 서버로부터 인증 토큰을 받음
- 인증 토큰을 안전하게 저장함
- 사용자를 애플리케이션의 주요 기능 페이지로 자동 이동시킴
- 사용자가 인증된 상태로 애플리케이션을 사용할 수 있음

**검증 기준**:
- 인증 성공 시 인증 토큰이 저장됨
- 인증 성공 시 주요 기능 페이지로 이동
- 인증된 상태가 애플리케이션 전역에서 유지됨

### FR-005: 인증 실패 처리
**설명**: 서버에서 인증에 실패하면 사용자에게 적절한 오류 메시지를 표시합니다.

**요구사항**:
- 잘못된 자격 증명으로 인한 인증 실패 시 사용자에게 명확한 오류 메시지 표시
- 비활성화된 계정 또는 SNS 계정으로 시도한 경우 적절한 오류 메시지 표시
- 오류 메시지가 사용자가 이해하기 쉬운 언어로 표시됨
- 오류 발생 후에도 사용자가 자격 증명을 다시 입력할 수 있음

**검증 기준**:
- 인증 실패 시 사용자에게 오류 메시지 표시
- 오류 메시지가 상황에 맞게 적절히 표시됨
- 오류 발생 후에도 폼이 정상적으로 동작함

### FR-006: 네트워크 오류 처리
**설명**: 네트워크 오류나 서버 오류가 발생했을 때 사용자에게 적절한 안내를 제공합니다.

**요구사항**:
- 네트워크 연결 오류 시 사용자에게 명확한 오류 메시지 표시
- 서버 오류 시 사용자에게 명확한 오류 메시지 표시
- 사용자가 다시 시도할 수 있는 방법 제공

**검증 기준**:
- 네트워크 오류 시 사용자에게 오류 메시지 표시
- 서버 오류 시 사용자에게 오류 메시지 표시
- 사용자가 다시 시도할 수 있는 상태 유지

---

## 🚀 비기능 요구사항 (NFR)

### 성능
- **NFR-001**: 로그인 요청 후 응답까지의 시간이 3초 이하
- **NFR-002**: 로그인 페이지 로드 시간이 2초 이하
- **NFR-003**: 로그인 폼 입력 필드의 반응 시간이 100ms 이하

### 보안
- **NFR-004**: 비밀번호 입력 필드에 입력된 값이 화면에 노출되지 않음
- **NFR-005**: 인증 토큰이 안전한 방식으로 저장됨
- **NFR-006**: 로그인 요청이 안전한 통신 채널을 통해 전송됨
- **NFR-007**: 로그인 실패 시 구체적인 오류 정보가 노출되지 않음 (보안을 위해 일반적인 메시지만 표시)

### 사용자 경험
- **NFR-008**: 로그인 폼이 직관적이고 사용하기 쉬움
- **NFR-009**: 오류 메시지가 명확하고 사용자가 이해하기 쉬움
- **NFR-010**: 로그인 요청 중에는 적절한 로딩 상태가 표시됨
- **NFR-011**: 키보드로 모든 입력 필드와 버튼에 접근 가능함
- **NFR-012**: 모바일 환경에서 입력 필드와 버튼이 터치하기 적절한 크기로 표시됨

### 접근성
- **NFR-013**: 입력 필드에 적절한 라벨이 제공됨
- **NFR-014**: 오류 메시지가 스크린 리더를 통해 접근 가능함
- **NFR-015**: 키보드 네비게이션으로 모든 기능에 접근 가능함

### 호환성
- **NFR-016**: 주요 모바일 브라우저(Chrome, Safari, Firefox)에서 정상 동작
- **NFR-017**: 다양한 모바일 기기 화면 크기에서 정상적으로 표시됨

---

## 🔍 엣지 케이스 및 예외 상황

### EC-001: 전화번호와 이메일 모두 입력
**상황**: 사용자가 전화번호와 이메일을 모두 입력한 경우

**처리 방법**: 
- 서버 API 스펙에 따라 전화번호 또는 이메일 중 하나만 사용하거나, 우선순위에 따라 처리
- 사용자에게 명확한 안내 제공

### EC-002: 로그인 중 페이지 이탈
**상황**: 사용자가 로그인 요청 중에 페이지를 이탈하는 경우

**처리 방법**:
- 진행 중인 요청을 취소하거나 무시
- 사용자가 다시 로그인 페이지에 접근할 수 있음

### EC-003: 이미 인증된 사용자의 접근
**상황**: 이미 로그인한 사용자가 로그인 페이지에 접근하는 경우

**처리 방법**:
- 사용자를 주요 기능 페이지로 자동 리다이렉트
- 또는 로그인 페이지에 접근할 수 있도록 허용 (선택적)

### EC-004: 토큰 저장 실패
**상황**: 인증 토큰 저장에 실패한 경우

**처리 방법**:
- 사용자에게 오류 메시지 표시
- 사용자가 다시 로그인을 시도할 수 있도록 함

### EC-005: 서버 응답 지연
**상황**: 로그인 요청에 대한 서버 응답이 지연되는 경우

**처리 방법**:
- 적절한 타임아웃 설정
- 타임아웃 발생 시 사용자에게 명확한 안내 제공
- 사용자가 다시 시도할 수 있도록 함

### EC-006: 입력 필드 포커스 관리
**상황**: 오류 발생 후 입력 필드 포커스가 적절하지 않은 경우

**처리 방법**:
- 오류가 발생한 입력 필드에 포커스 이동
- 또는 첫 번째 오류가 발생한 필드에 포커스 이동

---

## 🎨 디자인 제약사항

### 레이아웃
- **Figma 디자인 준수**: 제공된 Figma 디자인과 일치하는 레이아웃 및 스타일 적용
- **모바일 최적화**: 모바일 환경을 기준으로 한 레이아웃 구성
- **일관성**: 인증 관련 페이지(로그인, 회원가입) 간 일관된 디자인 유지

### 입력 필드
- **명확한 라벨**: 각 입력 필드에 명확한 라벨 제공
- **플레이스홀더**: 필요시 적절한 플레이스홀더 텍스트 제공
- **오류 표시**: 오류 발생 시 명확한 시각적 피드백 제공

### 버튼 및 링크
- **명확한 액션**: 로그인 버튼과 회원가입 링크가 명확하게 구분됨
- **접근성**: 버튼과 링크가 키보드로 접근 가능함
- **터치 타겟**: 모바일 환경에서 적절한 터치 타겟 크기 유지

### 색상 및 스타일
- **디자인 토큰 준수**: 프로젝트의 디자인 토큰 시스템을 준수함
- **일관성**: 기존 디자인 시스템과 일관된 스타일 적용

---

## 📊 성공 지표 (KPI)

### 사용자 경험
- **로그인 성공률**: 유효한 자격 증명 제공 시 로그인 성공률 95% 이상
- **로그인 완료 시간**: 로그인 요청부터 주요 기능 페이지 이동까지의 시간이 5초 이하
- **오류 처리 만족도**: 사용자가 오류 메시지를 이해하고 적절히 대응할 수 있는 비율 90% 이상

### 기술적 품질
- **API 응답 시간**: 로그인 API 응답 시간이 3초 이하
- **페이지 로드 시간**: 로그인 페이지 로드 시간이 2초 이하
- **오류 처리율**: 모든 오류 상황에 대해 적절한 처리율 100%

### 보안
- **토큰 저장 안전성**: 인증 토큰이 안전하게 저장되어 이후 요청에서 사용 가능한 비율 100%
- **비밀번호 노출 방지**: 비밀번호 입력 필드에서 값이 노출되지 않는 비율 100%

---

## 🔗 기술 의존성

### 필수 의존성
- **인증 API**: 자체 로그인을 위한 백엔드 API 엔드포인트
- **토큰 저장소**: 인증 토큰을 안전하게 저장하기 위한 저장소

### 선택적 의존성
- **폼 검증 라이브러리**: 입력 필드 유효성 검증을 위한 라이브러리 (필요시)
- **로딩 상태 관리**: 로그인 요청 중 로딩 상태를 표시하기 위한 상태 관리

---

## 📝 가정사항

### 사용자 환경
- 사용자는 모바일 기기에서 웹 애플리케이션을 주로 사용함
- 사용자는 자체 계정(전화번호 또는 이메일 기반)을 보유하고 있음
- 사용자는 비밀번호를 기억하고 있음

### 기술 환경
- 백엔드 API가 `/api/auth/local/login` 엔드포인트를 제공함
- 백엔드 API가 전화번호 또는 이메일과 비밀번호를 받아 인증을 처리함
- 백엔드 API가 인증 성공 시 JWT 토큰을 반환함
- 기존 토큰 저장 및 관리 시스템이 이미 구현되어 있음

### 디자인 시스템
- 제공된 Figma 디자인이 최종 디자인으로 확정됨
- 프로젝트의 기존 디자인 토큰 시스템을 준수함

---

## 🚧 향후 확장 가능성

### 향후 개선 사항
- 비밀번호 표시/숨김 토글 기능
- 자동 로그인 기능 (선택적)
- 로그인 이력 관리
- 다중 기기 로그인 관리

### 확장 가능한 기능
- 소셜 로그인 연동 (별도 명세서에서 다룸)
- 2단계 인증 (2FA)
- 생체 인증 (지문, Face ID 등)
- 로그인 알림 기능
