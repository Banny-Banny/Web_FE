# 타임캡슐 방장 최종 제출 기능 명세서

**Feature Branch**: `feat/time-capsule-final`  
**Created**: 2026-01-29  
**Status**: Draft  
**Input**: User description: "방장이 타임캡슐을 최종 제출하는 로직을 웹에 구현해야 합니다."

---

## 📋 개요

### 프로젝트 목표
방장이 모든 참여자의 콘텐츠 작성이 완료되면 타임캡슐을 최종 제출하여 땅에 묻을 수 있도록 합니다.  
모바일 앱에서 검증된 제출 경험을 **웹 환경으로 마이그레이션**하되, 서버 API 스펙과 요청/응답 구조를 **절대 변경하지 않고** 동일한 동작을 보장하는 것을 목표로 합니다.

### 비즈니스 가치
- **명확한 완료 시점**: 방장이 모든 참여자의 준비 상태를 확인하고 명시적으로 타임캡슐을 제출함으로써 프로세스의 완결성을 제공합니다.
- **자동 제출 안전장치**: 24시간 내 미제출 시 자동 제출되어 사용자가 기능을 놓치지 않도록 보장합니다.
- **투명한 마감 관리**: 실시간 타이머로 남은 시간을 표시하여 긴박감과 명확한 마감 시점을 제공합니다.
- **위치 기반 추억**: GPS 위치 정보를 저장하여 나중에 해당 장소에서 타임캡슐을 개봉하는 경험을 제공합니다.

### 범위
- **포함**
  - 방장 권한 확인 및 제출 버튼 표시 제어
  - 모든 참여자의 콘텐츠 제출 완료 여부 확인
  - GPS 위치 정보 수집 및 검증
  - 24시간 자동 제출 타이머 표시
  - 수동 제출 플로우 (확인 모달, API 호출, 완료 안내)
  - 자동 제출 후 방 재접속 시 안내
  - 제출 관련 에러 상황 처리
- **제외**
  - 타임캡슐 대기실 생성 및 초대 기능 (별도 스펙)
  - 참여자의 콘텐츠 작성 기능 (별도 스펙)
  - 결제 처리 기능 (별도 스펙)
  - 타임캡슐 개봉 및 보관함 기능 (별도 스펙)
  - 백엔드의 자동 제출 스케줄러 구현

---

## 🎯 사용자 시나리오

### US1: 방장이 모든 참여자의 준비를 확인하고 타임캡슐을 제출한다 (Priority: P1)

**시나리오**: 방장이 대기실에서 모든 참여자가 콘텐츠 작성을 완료한 것을 확인하고, 타임캡슐을 최종 제출하는 경우

**사용자 행동**
1. 방장이 타임캡슐 대기실에 접속한다.
2. 화면에서 모든 참여자의 진행 상태가 100%임을 확인한다.
3. 화면 상단에 "23시간 45분 남음"과 같은 자동 제출 타이머가 표시된다.
4. 화면 하단의 "타임캡슐 묻기" 버튼이 활성화되어 있다.
5. 방장이 "타임캡슐 묻기" 버튼을 클릭한다.
6. 확인 모달이 나타나 개봉 예정일과 남은 시간을 보여준다.
7. 방장이 "묻기" 버튼을 클릭하여 최종 확인한다.
8. 시스템이 GPS 위치를 수집하고 제출 API를 호출한다.
9. 제출 완료 모달이 표시되며 D-Day 정보를 확인한다.
10. 방장은 홈 화면 또는 보관함으로 이동한다.

**기대 결과**
- 방장은 모든 참여자의 준비 상태를 한눈에 확인할 수 있다.
- 제출 전 확인 단계를 통해 실수로 제출하는 것을 방지한다.
- 제출 완료 후 타임캡슐이 성공적으로 묻혔음을 명확히 인지한다.

**성공 기준**
- 제출 조건 충족 시 "타임캡슐 묻기" 버튼 활성화율 100%.
- 제출 API 호출 성공률 95% 이상.
- 제출 완료 후 사용자의 98% 이상이 성공 메시지를 확인.

---

### US2: 방장이 24시간 타이머를 보며 마감 시간을 인지한다 (Priority: P1)

**시나리오**: 방장이 대기실에서 자동 제출까지 남은 시간을 실시간으로 확인하는 경우

**사용자 행동**
1. 방장이 대기실에 접속한다.
2. 화면 상단에 "23시간 45분 남음"과 같은 타이머가 표시된다.
3. 시간이 경과하면서 타이머가 실시간으로 업데이트된다.
4. 남은 시간이 1시간 미만이 되면 "⚠️ 45분 남음"으로 주황색으로 강조된다.
5. 남은 시간이 10분 미만이 되면 "🚨 9분 30초 남음"으로 빨간색으로 깜빡이며 표시된다.
6. 방장은 마감 시간 전에 타임캡슐을 제출하거나, 참여자들에게 독려한다.

**기대 결과**
- 방장은 언제든지 남은 시간을 명확히 인지할 수 있다.
- 마감이 임박할수록 시각적 강조가 강해져 긴박감을 느낀다.
- 자동 제출 전에 수동으로 제출할 수 있는 충분한 시간적 여유를 인지한다.

**성공 기준**
- 타이머가 1초 단위로 정확하게 업데이트되는 비율 99% 이상.
- 1시간 미만 시 주황색 경고 표시율 100%.
- 10분 미만 시 빨간색 강조 표시율 100%.

---

### US3: 24시간이 경과하여 자동으로 제출된 타임캡슐을 확인한다 (Priority: P1)

**시나리오**: 방장이 24시간 내에 제출하지 않아 백엔드에서 자동으로 제출된 경우, 방장이 다시 접속하는 상황

**사용자 행동**
1. 방 생성 후 24시간이 경과한다.
2. 백엔드 스케줄러가 자동으로 타임캡슐을 제출한다.
3. 방장이 대기실에 다시 접속을 시도한다.
4. "이미 제출된 타임캡슐입니다" 모달이 표시된다.
5. 모달에 "24시간이 경과하여 자동으로 제출되었습니다"라는 안내가 표시된다.
6. 제출 시각과 개봉 예정일이 함께 표시된다.
7. 방장은 "보관함으로 이동" 또는 "홈으로" 버튼을 선택한다.

**기대 결과**
- 자동 제출된 타임캡슐도 정상적으로 보관되어 있음을 확인한다.
- 자동 제출 사실을 명확히 인지하고 혼란스럽지 않다.
- 보관함에서 제출된 타임캡슐을 확인할 수 있다.

**성공 기준**
- 자동 제출 후 방 재접속 시 안내 모달 표시율 100%.
- 자동 제출 여부(is_auto_submitted) 표시 정확도 100%.
- 보관함 이동 성공률 98% 이상.

---

### US4: 참여자가 아직 콘텐츠를 제출하지 않아 제출이 불가능하다 (Priority: P1)

**시나리오**: 일부 참여자가 콘텐츠 작성을 완료하지 않아 방장이 제출할 수 없는 경우

**사용자 행동**
1. 방장이 대기실에 접속한다.
2. 일부 참여자의 진행 상태가 100% 미만이다.
3. "타임캡슐 묻기" 버튼이 비활성화되어 있다.
4. 버튼 위에 "모든 참여자가 콘텐츠를 제출해야 합니다" 안내가 표시된다.
5. 방장이 비활성화된 버튼을 클릭하면 아무 동작도 일어나지 않는다.

**기대 결과**
- 방장은 왜 제출할 수 없는지 명확히 이해한다.
- 참여자들에게 콘텐츠 작성을 독려할 수 있다.
- 모든 참여자가 완료하면 버튼이 자동으로 활성화된다.

**성공 기준**
- 미완료 참여자 존재 시 버튼 비활성화율 100%.
- 비활성화 사유 안내 표시율 100%.
- 모든 참여자 완료 시 버튼 자동 활성화율 100%.

---

### US5: GPS 위치 정보를 가져올 수 없어 제출이 실패한다 (Priority: P2)

**시나리오**: 사용자가 위치 권한을 거부하거나 GPS를 사용할 수 없는 환경에서 제출을 시도하는 경우

**사용자 행동**
1. 방장이 "타임캡슐 묻기" 버튼을 클릭한다.
2. 시스템이 GPS 위치 정보를 요청한다.
3. 사용자가 위치 권한을 거부하거나, GPS 신호를 받을 수 없다.
4. "위치 정보를 가져올 수 없습니다" 에러 메시지가 표시된다.
5. 방장은 위치 권한을 허용하거나 GPS가 가능한 환경으로 이동한 후 다시 시도한다.

**기대 결과**
- 위치 정보가 필수임을 명확히 인지한다.
- 위치 권한 설정 방법을 안내받는다.
- 위치 정보 수집 후 정상적으로 제출할 수 있다.

**성공 기준**
- GPS 실패 시 에러 메시지 표시율 100%.
- 위치 권한 안내 제공률 100%.
- 재시도 성공률 80% 이상.

---

## 📋 기능 요구사항 (FR)

### FR-001: 방장 권한 확인 및 제출 버튼 표시
**설명**: 방장에게만 타임캡슐 제출 버튼을 표시하고, 일반 참여자에게는 숨깁니다.

**요구사항**
- 백엔드 API 응답의 `is_host` 플래그를 확인하여 방장 여부를 판단해야 한다.
- 방장인 경우에만 "타임캡슐 묻기" 버튼을 화면에 표시해야 한다.
- 일반 참여자에게는 제출 버튼이 표시되지 않아야 한다.
- 방장 여부는 클라이언트가 아닌 서버에서 최종 검증되어야 한다.

**검증 기준**
- `is_host === true`인 경우 제출 버튼 표시율 100%.
- `is_host === false`인 경우 제출 버튼 미표시율 100%.
- 방장이 아닌 사용자가 API를 직접 호출해도 403 에러가 반환된다.

---

### FR-002: 제출 조건 확인 및 버튼 활성화 제어
**설명**: 모든 제출 조건이 충족되었을 때만 제출 버튼을 활성화합니다.

**요구사항**
- 다음 조건이 **모두** 충족되어야 제출 버튼이 활성화되어야 한다:
  - 모든 참여자가 콘텐츠 제출 완료 (`has_content: true`)
  - 참여자 진행률 100%
  - 유효한 GPS 위치 정보 수집 가능
  - 결제 완료 상태
  - 24시간 마감 전
- 조건이 하나라도 충족되지 않으면 버튼이 비활성화되어야 한다.
- 비활성화된 경우, 그 이유를 버튼 위 또는 근처에 명확히 표시해야 한다.
- 조건이 충족되면 버튼이 자동으로 활성화되어야 한다.

**검증 기준**
- 모든 조건 충족 시 버튼 활성화율 100%.
- 조건 미충족 시 버튼 비활성화율 100%.
- 비활성화 사유 표시율 100%.

---

### FR-003: 24시간 자동 제출 타이머 표시
**설명**: 방 생성 시각으로부터 24시간 카운트다운을 실시간으로 표시합니다.

**요구사항**
- 방 생성 시각(`created_at`)으로부터 24시간 후 마감 시각을 계산해야 한다.
- 현재 시각 기준 남은 시간을 "XX시간 XX분 남음" 형식으로 표시해야 한다.
- 타이머는 1초 단위로 실시간 업데이트되어야 한다.
- 남은 시간이 1시간 미만일 때:
  - "⚠️ XX분 남음" 형식으로 표시
  - 주황색으로 강조
- 남은 시간이 10분 미만일 때:
  - "🚨 X분 XX초 남음" 형식으로 표시
  - 빨간색으로 강조
  - 깜빡임 효과 적용
- 24시간이 경과하면 "자동 제출됨" 표시로 변경되어야 한다.

**검증 기준**
- 타이머 업데이트 정확도 99% 이상 (1초 오차 범위).
- 1시간 미만 시 주황색 표시율 100%.
- 10분 미만 시 빨간색 깜빡임 표시율 100%.
- 24시간 경과 시 "자동 제출됨" 표시율 100%.

---

### FR-004: 제출 확인 모달 표시
**설명**: 방장이 제출 버튼을 클릭하면 최종 확인 모달을 표시합니다.

**요구사항**
- "타임캡슐을 묻으시겠어요?" 제목을 표시해야 한다.
- 개봉 예정일을 "YYYY년 MM월 DD일에 개봉됩니다" 형식으로 표시해야 한다.
- 남은 시간을 "자동 제출까지 X시간 남았습니다" 형식으로 표시해야 한다.
- "묻기" 확인 버튼과 "취소" 버튼을 제공해야 한다.
- "취소"를 클릭하면 모달이 닫히고 대기실 화면으로 돌아가야 한다.
- "묻기"를 클릭하면 GPS 위치 수집 및 제출 API 호출을 진행해야 한다.

**검증 기준**
- 제출 버튼 클릭 시 모달 표시율 100%.
- 개봉 예정일 표시 정확도 100%.
- "취소" 클릭 시 모달 닫힘 성공률 100%.
- "묻기" 클릭 시 제출 프로세스 진행률 100%.

---

### FR-005: GPS 위치 정보 수집
**설명**: 타임캡슐 제출 시 사용자의 현재 GPS 위치를 수집합니다.

**요구사항**
- Web Geolocation API를 사용하여 위치 정보를 수집해야 한다.
- 위치 정보 수집 중 로딩 상태를 표시해야 한다.
- 위도(latitude)는 -90 ~ 90 범위여야 한다.
- 경도(longitude)는 -180 ~ 180 범위여야 한다.
- 위치 권한이 거부된 경우, 사용자에게 권한 허용을 안내해야 한다.
- GPS 신호를 받을 수 없는 경우, 에러 메시지를 표시해야 한다.
- 위치 정보 수집에 실패하면 제출이 중단되어야 한다.

**검증 기준**
- 위치 정보 수집 성공률 90% 이상 (정상 환경).
- 위치 권한 거부 시 안내 메시지 표시율 100%.
- GPS 실패 시 에러 메시지 표시율 100%.
- 위치 정보 범위 검증 정확도 100%.

---

### FR-006: 타임캡슐 제출 API 호출
**설명**: GPS 위치 정보를 포함하여 타임캡슐 제출 API를 호출합니다.

**요구사항**
- `POST /api/capsules/step-rooms/:roomId/submit` 엔드포인트를 호출해야 한다.
- 요청 헤더에 `Authorization: Bearer {access_token}`을 포함해야 한다.
- 요청 바디에 `latitude`와 `longitude`를 포함해야 한다.
- API 호출 중 로딩 상태를 표시해야 한다.
- 로딩 중에는 버튼을 비활성화하여 중복 요청을 방지해야 한다.
- 응답 성공 시 제출 완료 모달을 표시해야 한다.
- 응답 실패 시 에러 메시지를 표시해야 한다.

**검증 기준**
- API 호출 성공률 95% 이상.
- 로딩 중 중복 요청 방지율 100%.
- 성공 시 완료 모달 표시율 100%.
- 실패 시 에러 메시지 표시율 100%.

---

### FR-007: 제출 완료 모달 표시
**설명**: 타임캡슐 제출 성공 후 완료 안내 모달을 표시합니다.

**요구사항**
- 수동 제출 시 "타임캡슐이 묻혔어요!" 제목을 표시해야 한다.
- 자동 제출 시 "타임캡슐이 자동으로 묻혔어요" 제목을 표시해야 한다.
- 개봉까지 남은 일수를 "D-XXX일 후 개봉됩니다" 형식으로 표시해야 한다.
- 자동 제출인 경우 "24시간이 경과하여 자동으로 제출되었습니다" 추가 안내를 표시해야 한다.
- "확인" 버튼을 제공하여 홈 화면 또는 보관함으로 이동할 수 있어야 한다.
- `is_auto_submitted` 플래그를 확인하여 수동/자동 제출을 구분해야 한다.

**검증 기준**
- 제출 성공 시 완료 모달 표시율 100%.
- 수동/자동 제출 구분 정확도 100%.
- D-Day 계산 정확도 100%.
- "확인" 클릭 시 화면 이동 성공률 98% 이상.

---

### FR-008: 자동 제출 후 방 재접속 처리
**설명**: 자동 제출된 타임캡슐의 방에 다시 접속하면 안내 모달을 표시합니다.

**요구사항**
- 방 상태가 `BURIED`이고 `is_auto_submitted === true`인 경우를 감지해야 한다.
- "이미 제출된 타임캡슐입니다" 모달을 표시해야 한다.
- "24시간이 경과하여 자동으로 제출되었습니다" 안내를 표시해야 한다.
- 제출 시각을 "YYYY년 MM월 DD일 HH:mm에 제출되었습니다" 형식으로 표시해야 한다.
- 개봉 예정일을 "YYYY년 MM월 DD일에 개봉됩니다" 형식으로 표시해야 한다.
- "보관함으로 이동" 버튼과 "홈으로" 버튼을 제공해야 한다.

**검증 기준**
- 자동 제출 후 재접속 시 안내 모달 표시율 100%.
- 제출 시각 및 개봉 예정일 표시 정확도 100%.
- 버튼 클릭 시 화면 이동 성공률 98% 이상.

---

### FR-009: 제출 관련 에러 처리
**설명**: 제출 실패 시 사용자 친화적인 에러 메시지를 표시합니다.

**요구사항**
- 각 에러 코드에 맞는 사용자 친화적인 메시지를 표시해야 한다:
  - `INCOMPLETE_PARTICIPANTS`: "아직 제출하지 않은 참여자가 있습니다"
  - `NOT_HOST`: "방장만 제출할 수 있습니다"
  - `ALREADY_SUBMITTED` (수동): "이미 제출된 타임캡슐입니다"
  - `ALREADY_SUBMITTED` (자동): "24시간이 경과하여 자동으로 제출되었습니다"
  - `INVALID_LOCATION`: "위치 정보를 가져올 수 없습니다"
  - `PAYMENT_NOT_COMPLETED`: "결제가 완료되지 않았습니다"
  - 기타: "오류가 발생했습니다. 다시 시도해주세요"
- 에러 메시지와 함께 "다시 시도" 또는 "확인" 버튼을 제공해야 한다.
- 기술적인 에러 코드는 사용자에게 노출하지 않아야 한다.

**검증 기준**
- 각 에러 코드별 메시지 표시 정확도 100%.
- 사용자 친화적 메시지 표시율 100%.
- 에러 후 재시도 가능률 100%.

---

## 🔑 핵심 엔티티

### 타임캡슐 대기실 (Room)
- **의미**: 참여자들이 콘텐츠를 작성하고 방장이 최종 제출하는 공간
- **주요 속성**:
  - 대기실 ID (`room_id`)
  - 방 생성 시각 (`created_at`)
  - 자동 제출 마감 시각 (`deadline_at` = `created_at` + 24시간)
  - 상태 (`status`: `ACTIVE` | `BURIED`)
  - 자동 제출 여부 (`is_auto_submitted`)

### 참여자 슬롯 (Slot)
- **의미**: 대기실 내 각 참여자의 정보와 진행 상태
- **주요 속성**:
  - 슬롯 번호 (`slot_number`)
  - 사용자 ID (`user_id`)
  - 방장 여부 (`is_host`)
  - 상태 (`status`: `ACCEPTED` | `PENDING`)
  - 닉네임 (`nickname`)
  - 콘텐츠 제출 여부 (`has_content`)

### 제출 요청 (Submit Request)
- **의미**: 방장이 타임캡슐을 제출할 때 전송하는 정보
- **주요 속성**:
  - 위도 (`latitude`: -90 ~ 90)
  - 경도 (`longitude`: -180 ~ 180)

### 제출 응답 (Submit Response)
- **의미**: 타임캡슐 제출 후 서버에서 반환하는 정보
- **주요 속성**:
  - 타임캡슐 ID (`capsule_id`)
  - 상태 (`status`: `BURIED`)
  - 위치 정보 (`location`)
  - 제출 시각 (`buried_at`)
  - 개봉 예정일 (`open_date`)
  - 참여자 수 (`participants`)
  - 자동 제출 여부 (`is_auto_submitted`)

---

## 🚀 성공 기준 (SC)

### 사용성 및 플로우 관점
- **SC-001**: 방장이 제출 조건 충족 시 5초 이내에 타임캡슐을 제출할 수 있는 비율 95% 이상.
- **SC-002**: 제출 확인 모달에서 "묻기" 버튼 클릭 후 3초 이내에 제출 완료 모달이 표시되는 비율 90% 이상.
- **SC-003**: 자동 제출 후 방 재접속 시 안내 모달을 통해 상황을 이해하는 사용자 비율 95% 이상.

### 정확성 및 안정성 관점
- **SC-004**: 방장이 아닌 사용자에게 제출 버튼이 표시되지 않는 비율 100%.
- **SC-005**: 제출 조건 미충족 시 버튼이 비활성화되는 비율 100%.
- **SC-006**: GPS 위치 정보 수집 성공률 90% 이상 (정상 환경).
- **SC-007**: 제출 API 호출 성공률 95% 이상.

### 타이머 정확성 관점
- **SC-008**: 24시간 타이머가 1초 오차 범위 내에서 정확하게 표시되는 비율 99% 이상.
- **SC-009**: 남은 시간 1시간 미만 시 주황색 경고가 표시되는 비율 100%.
- **SC-010**: 남은 시간 10분 미만 시 빨간색 강조가 표시되는 비율 100%.

---

## 🚧 비기능 요구사항 (NFR)

### 성능
- **NFR-001**: GPS 위치 정보 수집 시간 5초 이하 (정상 환경).
- **NFR-002**: 제출 API 호출 응답 시간 3초 이하인 비율 95% 이상.
- **NFR-003**: 타이머 업데이트로 인한 UI 렌더링 지연 없음.

### 보안 및 권한
- **NFR-004**: 방장 권한은 백엔드에서 최종 검증되어야 하며, 클라이언트 체크는 UI 목적만 사용.
- **NFR-005**: JWT 토큰 유효성 검증 필수.
- **NFR-006**: HTTPS 통신 필수.
- **NFR-007**: 위치 정보는 민감 데이터로 취급하여 안전하게 전송.
- **NFR-008**: 자동 제출은 백엔드 스케줄러에서만 처리되며 클라이언트에서 우회 불가.

### UX 및 접근성
- **NFR-009**: 모바일 기준 375px 고정 레이아웃 사용.
- **NFR-010**: 제출 버튼은 터치 디바이스에서 최소 44px × 44px 이상의 터치 영역.
- **NFR-011**: 타이머는 화면 상단에 항상 표시되어 스크롤과 무관하게 확인 가능.
- **NFR-012**: 색상, 타이포그래피, 간격은 프로젝트 공통 디자인 토큰 사용.
- **NFR-013**: 로딩 상태는 명확한 인디케이터로 표시.

---

## 🔍 엣지 케이스 및 예외 상황

### EC-001: 참여자가 콘텐츠를 제출하지 않음
- **상황**: 일부 참여자가 콘텐츠 작성을 완료하지 않아 `has_content: false`인 경우.
- **처리**:
  - "타임캡슐 묻기" 버튼 비활성화.
  - "모든 참여자가 콘텐츠를 제출해야 합니다" 안내 표시.
  - 24시간 경과 시 백엔드에서 자동 제출 (참여자 제출 여부 무관).

### EC-002: GPS 위치 권한 거부
- **상황**: 사용자가 브라우저의 위치 권한 요청을 거부한 경우.
- **처리**:
  - "위치 정보를 가져올 수 없습니다" 에러 메시지 표시.
  - "위치 권한을 허용해주세요" 안내 제공.
  - 브라우저 설정에서 권한 허용 방법 안내.

### EC-003: GPS 신호 수신 불가
- **상황**: 실내, 지하 등 GPS 신호를 받을 수 없는 환경.
- **처리**:
  - "위치 정보를 가져올 수 없습니다" 에러 메시지 표시.
  - "GPS 신호를 받을 수 있는 곳으로 이동해주세요" 안내 제공.
  - 재시도 버튼 제공.

### EC-004: 결제 미완료 상태
- **상황**: 결제가 완료되지 않아 제출이 불가능한 경우.
- **처리**:
  - "결제가 완료되지 않았습니다" 에러 메시지 표시.
  - 결제 페이지로 이동하는 버튼 제공.

### EC-005: 이미 제출된 타임캡슐 재제출 시도
- **상황**: 방장이 이미 제출된 타임캡슐을 다시 제출하려는 경우.
- **처리**:
  - `ALREADY_SUBMITTED` 에러 응답.
  - "이미 제출된 타임캡슐입니다" 메시지 표시.
  - `is_auto_submitted` 플래그에 따라 수동/자동 제출 구분 안내.

### EC-006: 24시간 경과 직전 제출 시도
- **상황**: 자동 제출 직전에 방장이 수동 제출을 시도하는 경우.
- **처리**:
  - 백엔드에서 먼저 처리된 요청을 우선.
  - 이미 자동 제출된 경우 `ALREADY_SUBMITTED` 에러 반환.
  - 수동 제출이 먼저 처리된 경우 정상 제출.

### EC-007: 네트워크 오류로 제출 실패
- **상황**: 제출 API 호출 중 네트워크 오류 발생.
- **처리**:
  - "오류가 발생했습니다. 다시 시도해주세요" 메시지 표시.
  - "다시 시도" 버튼 제공.
  - 최대 3회까지 자동 재시도.

### EC-008: 타이머 동기화 오류
- **상황**: 클라이언트와 서버 시간이 불일치하는 경우.
- **처리**:
  - 서버에서 제공하는 `created_at` 기준으로 계산.
  - 클라이언트 시간은 참고용으로만 사용.
  - 서버에서 자동 제출 여부를 최종 판단.

---

## 📌 제약사항 및 준수 사항

- **서버 스펙 변경 금지**: 기존 타임캡슐 제출 API의 URL, 메서드, 요청/응답 필드, 에러 코드 구조는 변경하지 않는다.
- **타입 및 필드명 변경 금지**: 제출 요청/응답에 사용되는 타입의 필드명, 타입 정의는 그대로 사용한다.
- **플랫폼 간 동작 일치**: 기존 React Native 앱과 웹의 제출 플로우는 기능적으로 동일하게 동작한다.
- **24시간 규칙 준수**: 방 생성 후 24시간 이내 미제출 시 자동 제출되는 규칙을 엄격히 준수한다.
- **GPS 필수**: 타임캡슐 제출 시 유효한 GPS 위치 정보가 필수적으로 필요하다.
- **방장 권한 엄격 검증**: 제출은 방장만 가능하며, 백엔드에서 최종 검증한다.

---

## 📝 가정사항

### 사용자 및 환경 가정
- 사용자는 주로 모바일 환경(375px 기준)에서 타임캡슐을 제출한다.
- 사용자는 GPS 위치 권한을 허용할 의향이 있다.
- 사용자는 타임캡슐 제출의 의미를 이해하고 신중하게 결정한다.

### 시스템 및 데이터 가정
- 방 생성 및 결제는 이미 완료된 상태에서 제출 플로우가 시작된다.
- 백엔드 스케줄러는 24시간 경과 시 정확하게 자동 제출을 처리한다.
- GPS 위치 정보는 Web Geolocation API를 통해 수집 가능하다.
- 서버 시간과 클라이언트 시간의 오차는 무시할 수 있는 수준이다.

---

## 🚧 향후 확장 가능성

- 타임캡슐 제출 전 미리보기 기능 (참여자별 콘텐츠 요약).
- 제출 위치를 지도에서 시각적으로 확인하는 기능.
- 제출 완료 후 SNS 공유 기능.
- 자동 제출 전 푸시 알림 (1시간 전, 10분 전).
- 방장이 자동 제출 시간을 연장하는 기능 (1회 제한).
- 제출된 타임캡슐의 위치를 나중에 수정하는 기능.
