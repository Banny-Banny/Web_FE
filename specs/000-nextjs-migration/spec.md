# TimeEgg 웹 프론트엔드 Next.js 기본 세팅 명세서

## 📋 개요

### 프로젝트 목표
기존 TimeEgg 모바일 앱의 디자인 시스템과 컴포넌트를 활용하여 Next.js 기반 웹 애플리케이션의 기본 인프라를 구축합니다.

### 비즈니스 가치
- **개발 효율성**: 기존 디자인 시스템 재사용으로 일관성 있는 UI/UX 확보
- **확장성**: 견고한 기본 구조로 향후 기능 개발 속도 향상
- **유지보수성**: 표준화된 폴더 구조와 컨벤션으로 팀 협업 효율 증대
- **성능 기반**: Next.js 최적화 기능을 활용한 성능 우선 아키텍처

### 범위
- **포함**: 프로젝트 구조, 디자인 시스템 이식, 라우팅 세팅, 프로바이더 구성, 폰트/색상 시스템
- **제외**: 실제 기능 구현, UI 컴포넌트 개발, 비즈니스 로직

---

## 🎯 개발자 시나리오

### P1 (기본 인프라 구축) - 독립 구현 가능

#### P1-1: 프로젝트 구조 및 폴더 세팅
**개발 목표**: Feature Slice Architecture 기반 폴더 구조 구축 및 기본 파일 생성

**작업 내용**:
1. `src/` 하위 폴더 구조 생성 (app, components, commons)
2. `commons/` 하위 세부 폴더 구조 생성 (apis, providers, hooks, components, utils, styles)
3. 각 폴더별 `index.ts` 배럴 파일 생성
4. TypeScript 경로 별칭 설정 (`@/commons`, `@/components` 등)
5. ESLint, Prettier 설정 파일 구성

**인수 테스트**:
- [ ] 모든 폴더에서 절대 경로 import 정상 동작
- [ ] ESLint 규칙 위반 시 빌드 실패
- [ ] TypeScript 컴파일 에러 없음
- [ ] 폴더 구조가 프로젝트 규칙과 100% 일치

#### P1-2: 디자인 시스템 이식 (globals.css + TypeScript + CSS 모듈)
**개발 목표**: 기존 TimeEgg/FE의 디자인 토큰을 웹 환경에 맞게 이식

**작업 내용**:
1. **globals.css에 CSS 변수 등록**:
   - 기존 `color.ts`의 모든 색상을 CSS 변수로 등록
   - 폰트, 간격 등 기본 변수 등록
2. **TypeScript 디자인 토큰 유지**:
   - 기존 `color.ts`, `typography.ts`, `spacing.ts` 구조 그대로 복사
   - 웹 환경에 맞게 필요한 부분만 수정
3. **컴포넌트 CSS 모듈 구조**:
   - 각 컴포넌트별 `index.tsx` + `styles.module.css` 구조
   - CSS 변수와 TypeScript 토큰 혼용 가능
4. **선택적 Tailwind CSS 통합**:
   - CSS 변수 기반 Tailwind 설정
5. 아이콘 SVG 파일 정리 및 접근 경로 설정

**인수 테스트**:
- [ ] globals.css에 모든 색상이 CSS 변수로 등록
- [ ] TypeScript에서 `Colors.white[500]` 등 기존 방식 그대로 사용 가능
- [ ] CSS 모듈에서 `var(--color-white-500)` 사용 가능
- [ ] 컴포넌트에서 CSS 변수 + TypeScript 토큰 혼용 가능
- [ ] Pretendard 폰트 로딩 및 적용 확인
- [ ] 아이콘 파일 정리 및 접근 가능

#### P1-3: Next.js App Router 및 기본 라우팅 세팅
**개발 목표**: App Router 기반 라우팅 구조 및 레이아웃 시스템 구축

**작업 내용**:
1. `app/` 폴더 내 기본 라우팅 구조 생성
2. Root Layout 컴포넌트 구성 (HTML, Body 태그 설정)
3. 글로벌 스타일 및 폰트 적용
4. 메타데이터 API 기본 설정
5. 에러 바운더리 및 로딩 컴포넌트 기본 구조

**인수 테스트**:
- [ ] 기본 페이지 라우팅 정상 동작
- [ ] Root Layout에서 폰트 및 스타일 적용 확인
- [ ] 메타데이터 정상 렌더링
- [ ] 에러 페이지 기본 구조 동작
- [ ] 개발 서버 빌드 에러 없음

### P2 (프로바이더 및 상태 관리)

#### P2-1: 전역 프로바이더 시스템 구축
**개발 목표**: React Query, React Context 등 전역 상태 관리 프로바이더 세팅

**작업 내용**:
1. React Query 프로바이더 설정 및 기본 옵션 구성
2. React Context 기반 전역 상태 관리 구조 정의
3. 프로바이더 컴포지션 패턴 구현
4. 개발 도구 (React Query Devtools) 설정
5. 에러 바운더리와 프로바이더 통합

**인수 테스트**:
- [ ] React Query 프로바이더 정상 동작
- [ ] React Context 프로바이더 생성 및 접근 가능
- [ ] 개발 도구 정상 작동
- [ ] 프로바이더 중첩 구조 최적화
- [ ] 타입스크립트 타입 추론 정상

#### P2-2: API 클라이언트 및 환경 변수 설정
**개발 목표**: Axios 기반 API 클라이언트 및 환경별 설정 구성

**작업 내용**:
1. Axios 인스턴스 생성 및 기본 설정
2. 환경 변수 스키마 정의 (.env.example)
3. API 엔드포인트 상수 관리 시스템
4. 요청/응답 인터셉터 기본 구조
5. 에러 처리 및 재시도 로직 기본 틀

**인수 테스트**:
- [ ] Axios 인스턴스 정상 생성
- [ ] 환경 변수 로딩 및 타입 체크
- [ ] API 상수 관리 시스템 동작
- [ ] 인터셉터 기본 구조 적용
- [ ] 개발/프로덕션 환경 분리

### P3 (성능 최적화 및 도구)

#### P3-1: 번들 최적화 및 성능 모니터링
**개발 목표**: Next.js 성능 최적화 기능 활용 및 모니터링 도구 설정

**작업 내용**:
1. next.config.js 성능 최적화 설정
2. 이미지 최적화 설정 (next/image)
3. 폰트 최적화 및 프리로드 설정
4. Bundle Analyzer 설정
5. 성능 측정 도구 통합

**인수 테스트**:
- [ ] 번들 사이즈 분석 도구 동작
- [ ] 이미지 최적화 설정 적용
- [ ] 폰트 프리로드 정상 동작
- [ ] Core Web Vitals 측정 가능
- [ ] 개발 빌드 성능 기준 통과

---

## 📋 기술 요구사항

### 프로젝트 구조 및 설정
- **TR-001**: Feature Slice Architecture 폴더 구조 구현
- **TR-002**: TypeScript 절대 경로 별칭 설정 (`@/commons`, `@/components`)
- **TR-003**: ESLint + Prettier 코드 품질 도구 설정
- **TR-004**: 각 폴더별 배럴 파일 (index.ts) 생성
- **TR-005**: 프로젝트 규칙 문서화 및 자동화

### 디자인 시스템 이식
- **TR-006**: globals.css에 CSS 변수 등록 (색상, 폰트, 간격)
- **TR-007**: 기존 디자인 토큰 TypeScript 파일 이식 (color.ts, typography.ts, spacing.ts)
- **TR-008**: 컴포넌트 CSS 모듈 구조 예시 생성 (index.tsx + styles.module.css)
- **TR-009**: Pretendard 폰트 파일 복사 및 웹 최적화 설정
- **TR-010**: 선택적 Tailwind CSS 통합 설정 (CSS 변수 기반)
- **TR-011**: 아이콘 SVG 파일 정리 및 접근 경로 설정

### Next.js 설정 및 라우팅
- **TR-011**: App Router 기반 라우팅 구조 구축
- **TR-012**: Root Layout 컴포넌트 구성 (HTML, Body, 메타데이터)
- **TR-013**: 글로벌 스타일 및 폰트 적용
- **TR-014**: 에러 바운더리 및 로딩 컴포넌트 기본 구조
- **TR-015**: 메타데이터 API 기본 설정

### 상태 관리 및 데이터 패칭
- **TR-016**: React Query 프로바이더 설정 및 기본 옵션
- **TR-017**: React Context 기반 전역 상태 관리 구조 정의
- **TR-018**: 프로바이더 컴포지션 패턴 구현
- **TR-019**: Axios 인스턴스 생성 및 기본 설정
- **TR-020**: API 엔드포인트 상수 관리 시스템

### 환경 설정 및 도구
- **TR-021**: 환경 변수 스키마 정의 (.env.example)
- **TR-022**: 개발/프로덕션 환경 분리
- **TR-023**: Bundle Analyzer 설정
- **TR-024**: React Query Devtools 개발 환경 설정
- **TR-025**: 성능 측정 도구 기본 통합

---

## 🚀 비기능 요구사항 (NFR)

### 개발 환경 및 빌드
- **NFR-001**: TypeScript 컴파일 에러 0개
- **NFR-002**: ESLint 경고/에러 0개
- **NFR-003**: 개발 서버 시작 시간 < 5초
- **NFR-004**: 핫 리로드 반응 시간 < 1초
- **NFR-005**: 프로덕션 빌드 성공률 100%

### 번들 및 성능
- **NFR-006**: 초기 번들 사이즈 < 500KB (gzipped)
- **NFR-007**: 폰트 로딩 시간 < 2초
- **NFR-008**: CSS 번들 사이즈 < 100KB
- **NFR-009**: 이미지 최적화 적용률 100%
- **NFR-010**: Tree-shaking 최적화 적용

### 코드 품질 및 유지보수성
- **NFR-011**: 코드 커버리지 측정 가능
- **NFR-012**: 절대 경로 import 사용률 100%
- **NFR-013**: 컴포넌트 재사용성 구조 확립
- **NFR-014**: 타입 안전성 보장 (any 타입 사용 금지)
- **NFR-015**: 일관된 코딩 컨벤션 적용

### 호환성 및 표준
- **NFR-016**: Next.js 16+ 호환성
- **NFR-017**: React 19+ 호환성
- **NFR-018**: 모던 브라우저 지원 (ES2020+)
- **NFR-019**: 모바일 반응형 기본 구조
- **NFR-020**: 접근성 기본 구조 (시맨틱 HTML)

### 개발 도구 및 디버깅
- **NFR-021**: React Query Devtools 정상 동작
- **NFR-022**: Bundle Analyzer 정상 동작
- **NFR-023**: 소스맵 생성 및 디버깅 지원
- **NFR-024**: 환경별 설정 분리 명확성

---

## 🔍 엣지 케이스 및 예외 상황

### 개발 환경 문제
- **EC-001**: Node.js 버전 불일치 시 명확한 에러 메시지
- **EC-002**: 패키지 설치 실패 시 대안 제시
- **EC-003**: 환경 변수 누락 시 기본값 제공
- **EC-004**: 포트 충돌 시 자동 대체 포트 사용

### 빌드 및 컴파일
- **EC-005**: TypeScript 컴파일 에러 시 명확한 위치 표시
- **EC-006**: ESLint 규칙 위반 시 자동 수정 가능한 것 구분
- **EC-007**: 순환 의존성 발생 시 경고 및 해결 가이드
- **EC-008**: 메모리 부족 시 빌드 최적화 옵션 제안

### 폰트 및 에셋
- **EC-009**: 폰트 로딩 실패 시 시스템 폰트 대체
- **EC-010**: 아이콘 파일 누락 시 기본 아이콘 표시
- **EC-011**: 이미지 경로 오류 시 404 이미지 대체
- **EC-012**: CSS 변수 미정의 시 기본값 적용

### 프로바이더 및 상태
- **EC-013**: React Query 프로바이더 초기화 실패 시 에러 바운더리
- **EC-014**: React Context 접근 오류 시 기본 상태 제공
- **EC-015**: API 클라이언트 초기화 실패 시 재시도 로직
- **EC-016**: 환경별 설정 로딩 실패 시 개발 모드 설정 사용

---

## 🎨 디자인 시스템 제약사항

### 기존 디자인 시스템 준수
- **기존 TimeEgg/FE 색상 팔레트** 100% 재사용
- **Pretendard 폰트** 전체 적용 (웹폰트 최적화)
- **기존 아이콘 세트** 그대로 이식
- **타이포그래피 스케일** 기존 모바일 기준 유지

### CSS 아키텍처
- **CSS 변수 기반** 색상 시스템 (하드코딩 금지)
- **Tailwind CSS 커스텀 설정**으로 디자인 토큰 통합
- **모듈화된 스타일** 구조 (컴포넌트별 분리)
- **반응형 기본 구조** (모바일 퍼스트)

### 폰트 최적화
- **폰트 서브셋** 생성 (한글 + 영문 + 숫자)
- **폰트 프리로드** 설정
- **FOUT/FOIT 방지** 전략 적용
- **폰트 디스플레이 최적화** (swap 전략)

---

## 🔗 기술 의존성

### 필수 패키지
- **Next.js**: 16+ (App Router)
- **React**: 19+ 
- **TypeScript**: 5+
- **Tailwind CSS**: 4+
- **React Query**: 5+ (@tanstack/react-query)
- **React Context API**: 전역 상태 관리
- **Axios**: 1+ (HTTP 클라이언트)

### 개발 도구
- **ESLint**: Next.js 설정 기반
- **Prettier**: 코드 포매팅
- **Bundle Analyzer**: 번들 분석
- **React Query Devtools**: 개발 도구

### 폰트 및 에셋
- **Pretendard 폰트 파일**: 기존 프로젝트에서 복사
- **아이콘 SVG 파일**: 기존 프로젝트에서 복사
- **이미지 에셋**: 기존 프로젝트에서 선별 복사

---

## 📊 성공 지표 (KPI)

### 개발 효율성
- 프로젝트 초기 세팅 완료 시간: 1일 이내
- 새로운 개발자 온보딩 시간: 30분 이내
- 코드 리뷰 시간: 평균 15분 이내
- 빌드 실패율: < 5%

### 기술 품질
- TypeScript 컴파일 에러: 0개 유지
- ESLint 경고/에러: 0개 유지
- 번들 사이즈: 기준치 이하 유지
- 테스트 커버리지: 측정 가능한 구조 확립

### 성능 기준
- 개발 서버 시작 시간: < 5초
- 핫 리로드 시간: < 1초
- 프로덕션 빌드 시간: < 2분
- 폰트 로딩 시간: < 2초

### 유지보수성
- 컴포넌트 재사용률: 구조적 지원
- 절대 경로 사용률: 100%
- 디자인 토큰 사용률: 100%
- 문서화 완성도: 핵심 규칙 100% 문서화