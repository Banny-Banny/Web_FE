# TimeEgg 웹 프론트엔드 Next.js 마이그레이션 명세서

## 📋 개요

### 프로젝트 목표
TimeEgg 모바일 앱의 핵심 기능을 Next.js 기반 웹 애플리케이션으로 재구성하여 웹 사용자에게 최적화된 경험을 제공합니다.

### 비즈니스 가치
- **접근성 확대**: 모바일 앱 설치 없이 웹 브라우저에서 바로 서비스 이용 가능
- **SEO 최적화**: 검색 엔진을 통한 자연 유입 증대
- **성능 최적화**: Next.js의 SSR/SSG를 활용한 빠른 초기 로딩
- **크로스 플랫폼**: 데스크톱과 모바일 웹 모두 지원

### 범위
- **포함**: 핵심 사용자 여정 (회원가입/로그인, 캡슐/알 생성, 지도 탐색, 친구 기능)
- **제외**: 관리자 기능, 고급 통계, 푸시 알림

---

## 🎯 사용자 시나리오

### P1 (MVP 핵심 기능) - 독립 구현 가능

#### P1-1: 신규 사용자 온보딩
**사용자 여정**: 처음 방문한 사용자가 서비스를 이해하고 회원가입을 완료하는 과정

**시나리오**:
1. 랜딩 페이지 접속 → TimeEgg 서비스 소개 확인
2. "시작하기" 버튼 클릭 → 회원가입 페이지 이동
3. 이메일/비밀번호 입력 → 계정 생성
4. 위치 권한 요청 → 허용/거부 선택
5. 온보딩 튜토리얼 → 핵심 기능 안내
6. 메인 지도 화면 진입

**인수 테스트**:
- [ ] 랜딩 페이지에서 서비스 가치 제안이 3초 내 이해 가능
- [ ] 회원가입 폼 유효성 검사 실시간 피드백
- [ ] 위치 권한 거부 시에도 서비스 이용 가능 (기본 위치 제공)
- [ ] 온보딩 완료 후 바로 캡슐 생성 가능

#### P1-2: 캡슐 생성 및 관리
**사용자 여정**: 로그인한 사용자가 추억을 캡슐로 만들어 지도에 저장하는 과정

**시나리오**:
1. 지도 화면에서 "+" 버튼 클릭
2. 캡슐 타입 선택 (일반 캡슐 vs 알)
3. 위치 선택 (현재 위치 또는 지도에서 선택)
4. 콘텐츠 입력 (텍스트, 이미지)
5. 공개 설정 (공개/비공개)
6. 캡슐 저장 완료

**인수 테스트**:
- [ ] 위치 기반 캡슐 생성 시 GPS 정확도 10m 이내
- [ ] 이미지 업로드 시 자동 압축 (최대 2MB)
- [ ] 캡슐 저장 후 즉시 지도에 표시
- [ ] 오프라인 상태에서도 임시 저장 후 온라인 시 동기화

#### P1-3: 지도 탐색 및 캡슐 발견
**사용자 여정**: 지도를 탐색하며 다른 사용자의 캡슐을 발견하고 상호작용하는 과정

**시나리오**:
1. 지도 화면에서 핀치/드래그로 탐색
2. 캡슐 마커 클릭 → 캡슐 상세 정보 확인
3. 캡슐에 반응 (좋아요, 댓글)
4. 관심 있는 캡슐 북마크
5. 내 캡슐 목록 확인

**인수 테스트**:
- [ ] 지도 로딩 시간 2초 이내
- [ ] 줌 레벨에 따른 캡슐 클러스터링
- [ ] 캡슐 상세보기 모달 애니메이션 부드러움
- [ ] 북마크한 캡슐 오프라인에서도 조회 가능

### P2 (사회적 기능)

#### P2-1: 친구 시스템
**사용자 여정**: 다른 사용자와 친구 관계를 맺고 소통하는 과정

**시나리오**:
1. 사용자 검색 (닉네임/이메일)
2. 친구 요청 발송
3. 친구 요청 수락/거절
4. 친구 목록 관리
5. 친구의 공개 캡슐 우선 표시

**인수 테스트**:
- [ ] 친구 검색 결과 1초 이내 표시
- [ ] 친구 요청 실시간 알림
- [ ] 친구 캡슐 지도에서 구분 표시
- [ ] 친구 목록 무한 스크롤

#### P2-2: 캡슐 공유 및 협업
**사용자 여정**: 친구와 함께 캡슐을 만들거나 공유하는 과정

**시나리오**:
1. 캡슐 생성 시 친구 초대
2. 공동 캡슐에 여러 사용자가 콘텐츠 추가
3. 캡슐 링크 공유 (소셜 미디어, 메신저)
4. 공유받은 캡슐 확인 및 반응

**인수 테스트**:
- [ ] 공동 캡슐 실시간 동기화
- [ ] 캡슐 링크 공유 시 미리보기 이미지 생성
- [ ] 권한 없는 사용자의 캡슐 접근 차단
- [ ] 공유 캡슐 조회수 통계

### P3 (고급 기능)

#### P3-1: 개인화 및 추천
**사용자 여정**: 사용자의 관심사와 행동 패턴에 맞는 개인화된 경험 제공

**시나리오**:
1. 사용자 활동 데이터 수집 (방문 위치, 관심 캡슐)
2. AI 기반 캡슐 추천
3. 개인화된 지도 테마
4. 관심 지역 알림 설정

**인수 테스트**:
- [ ] 추천 캡슐 정확도 70% 이상
- [ ] 개인화 설정 변경 즉시 반영
- [ ] 데이터 수집 동의 관리
- [ ] 추천 알고리즘 투명성 제공

#### P3-2: 고급 분석 및 통계
**사용자 여정**: 자신의 활동을 분석하고 인사이트를 얻는 과정

**시나리오**:
1. 개인 활동 대시보드 확인
2. 캡슐 생성 패턴 분석
3. 방문 지역 히트맵
4. 연간/월간 활동 리포트

**인수 테스트**:
- [ ] 대시보드 로딩 시간 3초 이내
- [ ] 데이터 시각화 반응형 지원
- [ ] 리포트 PDF 내보내기
- [ ] 개인정보 보호 준수

---

## 📋 기능 요구사항

### 인증 및 사용자 관리
- **FR-001**: 이메일/비밀번호 기반 회원가입/로그인
- **FR-002**: 소셜 로그인 (Google, Apple) 지원
- **FR-003**: 비밀번호 재설정 기능
- **FR-004**: 프로필 정보 관리 (닉네임, 프로필 이미지)
- **FR-005**: 계정 탈퇴 및 데이터 삭제

### 캡슐 관리
- **FR-006**: 텍스트 기반 캡슐 생성
- **FR-007**: 이미지 첨부 캡슐 생성 (최대 5장)
- **FR-008**: 위치 기반 캡슐 저장
- **FR-009**: 캡슐 공개/비공개 설정
- **FR-010**: 캡슐 수정/삭제 기능
- **FR-011**: 캡슐 검색 및 필터링

### 지도 및 탐색
- **FR-012**: 인터랙티브 지도 인터페이스
- **FR-013**: 캡슐 위치 마커 표시
- **FR-014**: 줌 레벨별 캡슐 클러스터링
- **FR-015**: 현재 위치 기반 주변 캡슐 탐색
- **FR-016**: 지역별 캡슐 밀도 히트맵

### 소셜 기능
- **FR-017**: 사용자 검색 및 친구 추가
- **FR-018**: 친구 요청 관리
- **FR-019**: 캡슐에 좋아요/댓글 기능
- **FR-020**: 캡슐 북마크 및 컬렉션
- **FR-021**: 캡슐 공유 링크 생성

---

## 🚀 비기능 요구사항 (NFR)

### 성능 지표
- **NFR-001**: 초기 페이지 로딩 시간 (LCP) < 2.5초
- **NFR-002**: 상호작용 지연 시간 (INP) < 200ms
- **NFR-003**: 누적 레이아웃 이동 (CLS) < 0.1
- **NFR-004**: 첫 바이트까지의 시간 (TTFB) p95 < 800ms
- **NFR-005**: 지도 렌더링 시간 < 1초

### 가용성 및 확장성
- **NFR-006**: 서비스 가용성 99.9% 이상
- **NFR-007**: 동시 접속자 1,000명 지원
- **NFR-008**: 캡슐 데이터 10만 개까지 원활한 조회
- **NFR-009**: 이미지 CDN 응답 시간 < 500ms
- **NFR-010**: 데이터베이스 쿼리 응답 시간 < 100ms

### 보안 및 개인정보
- **NFR-011**: HTTPS 강제 적용
- **NFR-012**: JWT 토큰 기반 인증
- **NFR-013**: 개인정보 암호화 저장
- **NFR-014**: GDPR 준수 데이터 처리
- **NFR-015**: XSS/CSRF 공격 방어

### 사용성 및 접근성
- **NFR-016**: 모바일 반응형 디자인 (320px~1920px)
- **NFR-017**: WCAG 2.1 AA 수준 접근성
- **NFR-018**: 다국어 지원 (한국어, 영어)
- **NFR-019**: 오프라인 모드 기본 기능 지원
- **NFR-020**: PWA 설치 가능

### 호환성
- **NFR-021**: Chrome, Safari, Firefox, Edge 최신 2버전 지원
- **NFR-022**: iOS Safari 14+, Android Chrome 90+ 지원
- **NFR-023**: 키보드 네비게이션 완전 지원
- **NFR-024**: 스크린 리더 호환성

---

## 🔍 엣지 케이스 및 예외 상황

### 네트워크 및 연결
- **EC-001**: 인터넷 연결 끊김 시 오프라인 모드 전환
- **EC-002**: 느린 네트워크에서 점진적 로딩
- **EC-003**: API 서버 장애 시 캐시된 데이터 표시
- **EC-004**: 이미지 로딩 실패 시 대체 이미지 표시

### 위치 및 권한
- **EC-005**: 위치 권한 거부 시 기본 위치 제공
- **EC-006**: GPS 정확도 낮을 때 사용자 알림
- **EC-007**: 해외 접속 시 지역 제한 안내
- **EC-008**: 위치 서비스 비활성화 시 수동 위치 선택

### 데이터 및 저장
- **EC-009**: 로컬 스토리지 용량 초과 시 자동 정리
- **EC-010**: 대용량 이미지 업로드 시 자동 압축
- **EC-011**: 동시 편집 충돌 시 마지막 저장 우선
- **EC-012**: 세션 만료 시 자동 로그아웃 및 데이터 보존

### 사용자 경험
- **EC-013**: 빈 상태 화면 적절한 안내 메시지
- **EC-014**: 검색 결과 없을 때 대안 제시
- **EC-015**: 폼 입력 오류 시 명확한 오류 메시지
- **EC-016**: 장시간 로딩 시 진행 상태 표시

---

## 🎨 디자인 제약사항

### 브랜드 아이덴티티
- **블랙 & 화이트 미니멀 디자인** 철저히 준수
- **Pretendard 폰트** 전체 적용
- TimeEgg 브랜드 컬러 포인트 사용만 허용

### 반응형 디자인
- 모바일 퍼스트 접근법
- 터치 친화적 인터페이스 (최소 44px 터치 영역)
- 데스크톱에서 마우스 호버 상태 제공

### 성능 최적화
- 이미지 최적화 (WebP, AVIF 우선)
- 폰트 서브셋 및 프리로드
- 크리티컬 CSS 인라인 처리

---

## 🔗 외부 의존성

### 필수 서비스
- **지도 API**: Kakao Map API
- **이미지 저장**: AWS S3 또는 Cloudinary
- **인증 서비스**: Firebase Auth 또는 자체 구현
- **푸시 알림**: Firebase Cloud Messaging

### 선택적 서비스
- **분석 도구**: Google Analytics 4
- **에러 모니터링**: Sentry
- **성능 모니터링**: Vercel Analytics
- **A/B 테스트**: Vercel Edge Config

---

## 📊 성공 지표 (KPI)

### 사용자 참여도
- 일일 활성 사용자 (DAU) 목표: 500명
- 캡슐 생성률: 사용자당 주 2개 이상
- 세션 지속 시간: 평균 5분 이상
- 재방문율: 7일 내 70% 이상

### 기술 성능
- Core Web Vitals 모든 지표 Good 달성
- 서버 응답 시간 p95 < 500ms
- 에러율 < 1%
- 가동 시간 > 99.9%

### 비즈니스 목표
- 회원가입 전환율: 방문자 대비 15% 이상
- 캡슐 공유율: 생성 캡슐 대비 30% 이상
- 사용자 만족도: NPS 50 이상
- 검색 유입: 전체 트래픽의 40% 이상